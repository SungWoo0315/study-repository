# 2021년 9월 17일 [87일차]

## # 오전수업
----
### `09:30~`

<어제복습>

#

<진도>  

## <게시판 흐름 분석>

새글쓰기부분부터 흐름리뷰.  

클라이언트가 받은 HTML 은 javascript 도 포함되어 있다.  

서버쪽에서 javascript 가 실행되는것은 node.js 이다.  

#

새글쓰기 클릭하면 실행되는,  

`goBoardRegForm()` 함수,  

새글쓰기는 아무값도 가져갈 필요 없기 때문에,  
아래코드처럼,  
`location.replace()`를 쓴다.  

```javascript
location.replace('/${requestScope.naverPath}boardRegForm.do');
``` 

#

`BoardController.java` 에서,  

`@RequestMapping( value = "/boardRegForm.do" )` 부분으로 넘어 온다.  

```java
@RequestMapping( value = "/boardRegForm.do" )
public ModelAndView goBoardRegForm(
    // ---------------------------------------------------------------
    // 파라미터명이 b_no 인 파라미터값을 받아오는 매개변수 b_no 선언하기
    // ---------------------------------------------------------------
    @RequestParam(
        value="b_no"            // 파라미터명 설정
        , required = false      // 파라미터명, 값이 안들어와도 허용한다는 의미
        , defaultValue = "0"    // 파라미터값 없으면 파라미터값을 0으로 저장
        ) int b_no

    // HttpServletRequest request

)
```
> 댓글쓰러 올때와, 새글쓰러 올때 두가지 경우여서,  
> `required` 와,  
> `defualtValue` 가 필요하다.  
> 새글쓰러 올때는 파라미터값이 없이 들어오기 때문.  
> 댓글쓰러 올때만 `b_no` 가지고 오기때문.  
> 만약 `required` 와 `defualtValue` 가 없다면,  
> `value="b_no"` 가 반드시 들어가야해서,  
> `b_no` 가 없으면 에러가 나기 때문.  

`BoardController.java` 에서,    
들어올때 처음 DB 연동하는것은?   

최상단의,  총개수 구하는 코드이다.    
```java
// mmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmm
// @RequestMapping 이 붙은 메소드가 호출되기 전에 호출되는 메소드 선언  
// @ModelAttribute 가 붙은 메소드는 @RequestMapping 이 붙은 메소드가 호출되기 전에 호출되는 메소드이다.    
// @ModelAttribute("키값명")이 붙은 메소드가 리턴하는 데이터는
// 스프링이 HttpServletRequest 객체에 setAttribute( "키값명", 리턴데이터 ) 메소드를 호출하므로
// @RequestMapping(~)이 붙은 메소드 호출 후에 이동하는 JSP 페이지에서 ${requestScope.키값명}으로 꺼낼 수 있다.  
// mmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmm
@ModelAttribute("totCnt")
public int getTotCnt( BoardSearchDTO boardSearchDTO ){
    int totCnt = this.boardDAO.getBoardListCount( boardSearchDTO );

    return totCnt;
}
```
> 컨트롤러에 접근할때마다 총개수가 갱신된다.  

#

`boardRegForm.jsp` 로 이동해서,  

jsp 는 서버에서 실행되는것이다.  

javascript 와 html 만 클라이언트에 가서 표기가 된다.  

컨트롤러에서 넘긴 파라미터값 b_no 을 받아서,  
제일먼저 새글쓰기인지 댓글쓰기인지 표현한다.  

```jsp
<c:choose>
    <c:when test="${empty param.b_no}">
        <caption>[[새글쓰기]]</caption>
    </c:when>
    <c:otherwise>
        <caption>[[댓글쓰기]]</caption>
    </c:otherwise>
</c:choose>
```
> 파라미터값이 있을 때 댓글쓰기로 들어간다.  

`${thBgColor}` 의 의미는?  
```jsp
<th bgcolor="${thBgColor}">이  름</th>  
```
> `HttpservletRequest 객체` 혹은,    
> `HttpSesstion 객체` 안을 찾는데,    

> `HttpservletRequest 객체`의 키값 `thBgColor` 를 찾는다.     
> 이 키값은 `common.jsp`   

----
### `10:30~`








----
### `11:30~`








----
### `12:30~`








----
### `13:20~`

  - 점심시간.

---
---

## # 오후수업

---
### `14:30~`










---
### `15:30~`









----
### `16:30~`








----
### `17:30~`








----
### `18:30~`
