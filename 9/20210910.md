# 2021년 9월 10일 [82일차]

## # 오전수업
----
### `09:30~`

추석전까지,   

<게시판 소스 분석>       

추석 전까지 파일업로드 추가된 게시판.  

게시판 소스 분석.    

#

<복습>    

페이징처리 관련 숫자 `Util.java` 로 공용으로 빼주고,    
메소드 작업.    

#

페이징 처리 로직,     
공용함수처리,  

`Util.java`에서,  

```java
// --------------------------------------------
// 페이징 처리 관련 정수 데이터를 구하고 Map<String,Integer> 객체에 저장하여 
// Map<String,Integer> 객체 메소드 선언  
// --------------------------------------------
public static Map<String,Integer> getPagingNos(
    int totCnt              // 검색 결과물에 총 개수.  
    ,int selectPageNo       // 유저가 선택한 페이지 번호
    ,int rowCntPerPage      // 한 화면에 보여줄 [행]의 개수  
    ,int pageNoCntPerPage   // 한 화면에 보여줄 [페이지번호]의 개수   
)throws Exception{
    // **********************************
    // [마지막 페이지번호] 저장 변수선언
    // 현재 페이지에서 보여줄 [최소 페이지 번호]
    // 현재 페이지에서 보여줄 [최대 페이지 번호]
    // **********************************
    int last_pageNo = 0;  
    int min_pageNo = 0;  
    int max_pageNo = 0;  
    // ----------------------------------
    // 검색 결과물의 총개수가 0보다 크면   
    // ----------------------------------
    if( totCnt>0 ){
        // 마지막 페이지 번호 구하기  
        last_pageNo = totCnt/rowCntPerPage;
            if( totCnt%rowCntPerPage > 0 ){last_pageNo++;}
  
            // 만약 선택한 페이지 번호가 마지막 페이지 번호보다 크면 선택한 페이지 번호를 1로 보정하기.    
            if( selectPageNo > last_pageNo ){
                // selectPageNo 변수에 1 저장하고,
                selectPageNo = 1;
            }
        // 현재 페이지에서 보여줄 [최소 페이지 번호] 구하기  
        min_pageNo = (selectPageNo - 1)/pageNoCntPerPage * pageNoCntPerPage + 1;
        // 현재 페이지에서 보여줄 [최대 페이지 번호] 구하기  
        max_pageNo = min_pageNo + pageNoCntPerPage - 1;
            if( max_pageNo > last_pageNo ) { max_pageNo = last_pageNo; }
  
    }
    // ----------------------------------
    // HashMap 객체 생성하기
    // ----------------------------------
    Map<String,Integer> map = new HashMap<String,Integer>();
    // ----------------------------------
    // HashMap 객체에 마지막 페이지 번호 저장하기
    // HashMap 객체에 현재 페이지에서 보여줄 [최소 페이지 번호]
    // HashMap 객체에 현재 페이지에서 보여줄 [최대 페이지 번호]
    // HashMap 객체에 선택한 페이지 번호 저장하기
    // HashMap 객체에 한 화면에 보여줄 [행]의 개수 저장하기
    // HashMap 객체에 한 화면에 보여줄 [페이지 번호]의 개수 저장하기
    // ----------------------------------
    map.put("last_pageNo", 0);
    map.put("min_pageNo", 0);
    map.put("max_pageNo", 0);
    map.put("selectPageNo", 0);
    map.put("rowCntPerPage", 0);
    map.put("pageNoCntPerPage", 0);
    // ----------------------------------
    // HashMap 객체 리턴하기
    // ----------------------------------
    return map;
}
```
> 선택페이지 보정 저장 `boardSearchDTO` 는 공용적 성격상 빼야한다.  

> 예외처리가 안되어있다.  
> `try~catch~final` 적용 할 시간이 없으면,  
> 매개변수 `)` 다음에, `throws Exception` 적용하기.    
> 예외처리를 떠넘기는것. 호출한쪽에서 처리하도록.  
> 예외처리할때 호출한쪽에서 처리하도록 넘기는것이다.  

#

바깥에서 데이터 들어오는것,  
java 스트림.     
파일 복사 업로드 객체,  
파일 업로드 코딩이 나오면,  
**반드시** `예외처리` 해야 한다.    

#

`BoardController.java` 에서,   
공용함수 쓰는법.  

```java
// mmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmm
// 공용함수 Util.java 꺼내서 쓰는법. 
// mmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmm
public ModelAndView getBoardList2(
    // --------------------------------------------------
    // 파라미터 값을 저장하고 있는 BoardSearchDTO 객체를 받아오는 매개변수 선언
    // --------------------------------------------------
    BoardSearchDTO boardSearchDTO
){

    // ***************************************
    // 검색 조건에 맞는 [게시판 목록의 총개수] 얻기
    // ***************************************
    int getBoardListCount = this.boardDAO.getBoardListCount( boardSearchDTO );
    int selectPageNo = boardSearchDTO.getSelectPageNo();
    int rowCntPerPage = boardSearchDTO.getRowCntPerPage();
    int pageNoCntPerPage = 10;
    // ***************************************
    Map<String,Integer> map = Util.getPagingNos(
    getBoardListCount              // 검색 결과물에 총 개수.  
    ,selectPageNo       // 유저가 선택한 페이지 번호
    ,rowCntPerPage      // 한 화면에 보여줄 [행]의 개수  
    ,pageNoCntPerPage   // 한 화면에 보여줄 [페이지번호]의 개수   
    );
    boardSearchDTO.setSelectPageNo(map.get("selectPageNo"));
    // ***************************************
    // 오라클 board 테이블 안의 데이터를 검색해와 자바 객체에 저장하기 즉, [게시판 목록] 얻기
    // 검색 조건에 맞는 [게시판 목록] 얻기
    // ***************************************
    List<Map<String, String>> boardList = this.boardDAO.getBoardList( boardSearchDTO );
    // ***************************************
    ModelAndView mav = new ModelAndView();
    mav.setViewName("boardList2.jsp");
    mav.addObject("boardList", boardList);
    mav.addObject("getBoardListCount", getBoardListCount);
    mav.addObject("pagingNos", map);  
    // 해시맵 객체로 저장. EL로 꺼내려면. ${pagingNos.selectPageNo}, ${pagingNos.min_pageNo}
    
    // ***************************************
    // [ModelAndView 객체] 리턴하기
    // ***************************************
    return mav;
}
```

#

----
### `10:30~`








----
### `11:30~`








----
### `12:30~`








----
### `13:20~`

  - 점심시간.

---
---

## # 오후수업

---
### `14:30~`










---
### `15:30~`









----
### `16:30~`








----
### `17:30~`








----
### `18:30~`
