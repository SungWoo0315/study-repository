# 2021년 9월 15일 [85일차]

## # 오전수업
----
### `09:30~`

<복습>    

`/naver/`를 URL 주소에 넣음.       

실무적으로,     
패키지 안의 클래스 패키지 분류해야하는것이 맞음.     

모듈화작업.    

#

로그인한 이후에 게시판 관련 페이지 이동시, 총개수는 다나오게 하고싶으면?    

중복코드 쓰지 않고, 만들기.    

#

`BoardController.java` 에서,  

주석추가.  

```java
// mmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmm
// 속성변수 path 선언하고 Info 인터페이스의 속성변수 naverPath 안의 데이터를 저장하기. 
// Info 인터페이스의 속성변수 naverPath 안에는 "naver/" 가 저장되어 있다.  
// mmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmm
// 파일 경로 Info 에서 가져오기.
private String path = Info.naverPath;
```

#

`BoardController.java` 에서,  

각 페이지 총개수만 표시하는 기능 구현하기.  

```java
// mmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmm
// @RequestMapping 이 붙은 메소드가 호출되기 전에 호출되는 메소드 선언  
// @ModelAttribute 가 붙은 메소드는 @RequestMapping 이 붙은 메소드가 호출되기 전에 호출되는 메소드이다.    
// @ModelAttribute("키값명")이 붙은 메소드가 리턴하는 데이터는
// 스프링이 HttpServletRequest 객체에 setAttribute( "키값명", 리턴데이터 ) 메소드를 호출하므로
// @RequestMapping(~)이 붙은 메소드 호출 후에 이동하는 JSP 페이지에서 ${requestScope.키값명}으로 꺼낼 수 있다.  
// mmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmm
@ModelAttribute("totCnt")
public int getTotCnt( BoardSearchDTO boardSearchDTO ){
    int totCnt = this.boardDAO.getBoardListCount( boardSearchDTO );

    return totCnt;
}
```
> `@ModelAttribute` 기능 기억하기.  

> `@RequestMapping` 이 호출되기 전에,   
> 무조건 호출되는 것이,  
> `@ModelAttribute` 이다.  
> 키값명이 붙으면 JSP 페이지 쪽으로 키값을 가지고 간다. HttpServletRequest 객체에 같이 담겨 간다.   

#

새글쓰기, 상세보기, 수정화면 에,  

총개수 나오게 하기.  

`boardRegForm.jsp` 에서,  
`boardContentForm.jsp` 에서,  
`boardUpDelForm.jsp` 에서,

아래 코드 각페이지 하단에 추가.

```jsp
[현재 게시글 총개수 : ${requestScope.totCnt}개]
```

#

`boardList.jsp` 에서,     

검색개수/총개수 <= 표현 만들기.  

```jsp
검색 총 개수 =><span class="boardListAllCnt" style="height: 10px;">${requestScope.getBoardListCount}</span>/${requestScope.totCnt}개
```
> `@ModelAttribute`를 이용한 총개수를 이용하여 총 개수 표시 가능.    
> 공통적으로 표현하고싶은 데이터는 이렇게 표현 가능.    

#

`@ModelAttribute`를 이용하면,  

모든 JSP 페이지에서 공통으로 사용할 데이터를 쓰기 좋다.    

#

----
### `10:30~`

`@ModelAttribute`를 쓰지 않고,   
총개수 넣어주는 방법은??     


`LoginController.java` 에서,    
하단에 코드 추가 후,    

```java
// --------------------------------------------------
// HttpSession 객체에 메시지 저장하기.
// HttpSession 객체에 저장된 데이터는 모든 JSP 페이지에서 ${sessionScope.키값명} 으로 꺼내 표현 할 수 있다.
// sessionScope 는 생략 가능하다.  
// --------------------------------------------------
session.setAttribute( 
    "msg"
    , " HttpSession 테스트 입니다.  ...! " 
);
```
> msg 에 DB 연동 결과물도 담을 수 있다.   
> sessionScope 는 생략 가능하다.  
> 생략하면, 중복된 키값을 피해야 한다.  


표현하고 싶은 각 페이지에,    
아래 코드를 추가하면 된다.    

```jsp
<div>${sessionScope.msg}</div>
```

`HttpSession 객체`안에 저장된 것은,  
삭제되지 않아서,  
모든페이지에서 꺼낼 수 있다.  

`HttpServletRequest` 는 클라이언트 호출 후 사라지지만,   
`HttpSession 객체`는 사라지지 않는다.  

- <예시>          
  쇼핑몰 장바구니에 담긴물건을 담고 페이지 이동을해도 담은 물건이 계속 보이는 이유는, `HttpSession 객체` 에 저장해서, 모든 페이지에서 표시가 되는것이다. 

  회원가입화면 가입절차 페이지 이동 시 회원가입정보를 `HttpSession 객체`에 저장하고 다음페이지로 이동하면서 저장 후 최종 가입 가능.     

너무 자주 사용하면 페이지 로딩에 부하가 걸린다.  

#


`boardUpDelForm.jsp` 에서,  

삭제 체크박스를 이미지가 있을때만 보이도록 if 조건문 안에 집어 넣기.    

```jsp
<tr>
    <th bgcolor="${thBgColor}">이미지</th>
    <td>
    <input type="file" name="img" class="img"><br>
    <c:if test="${!empty requestScope.boardDTO.pic}">
        <div style="height: 3pt;"></div>    
        <img src="/resources/img/${requestScope.boardDTO.pic}" width="30%">

        <input type="checkbox" name="is_del" class="is_del" value="yes">이미지파일 삭제 (이미지 파일을 삭제할때 클릭하세요)
    </c:if>

    </td>
</tr>
```

#

게시판 검색화면에서 이미지가 보이게 하려면,  

common.jsp 에 배율 조절 함수 만들고,  

한꺼번에 이미지 배율 변경하게 하기.  

#

----
### `11:30~`

`common.jsp` 에서,  

```jsp
<!-- 게시판 이미지 비율 조절 -->
<c:set var="boardImgRate1" value="30%" scope="request"/>
```
> 이미지 조절용 코드 작성.  

#

`boardContentForm.jsp` 에서,  

이미지 비율 EL 써서 꺼내서 넣기.  

```jsp
<tr >
    <th bgcolor="${thBgColor}">이미지</th>
    <td colspan="3">
        <c:if test="${!empty requestScope.boardDTO.pic}">
            <img src="/resources/img/${requestScope.boardDTO.pic}" width="${requestScope.boardImgRate1}">
        </c:if>
    </td>
</tr>
```
> `${requestScope.boardImgRate1}` 추가.

#

`boardUpDelForm.jsp` 에서,  

```jsp
<tr>
    <th bgcolor="${thBgColor}">이미지</th>
    <td>
    <input type="file" name="img" class="img"><br>
    <c:if test="${!empty requestScope.boardDTO.pic}">
        <div style="height: 3pt;"></div>    
        <img src="/resources/img/${requestScope.boardDTO.pic}" width="${requestScope.boardImgRate1}">

        <input type="checkbox" name="is_del" class="is_del" value="yes">이미지파일 삭제 (이미지 파일을 삭제할때 클릭하세요)
    </c:if>

    </td>
</tr>
```
> `${requestScope.boardImgRate1}` 추가.

#

`common.jsp` 에서,  

`cellpadding` 도 조절 가능.   

```jsp
<c:set var="cellpadding" value="7" scope="request"/>
```
> 각 jsp 페이지의 테이블 cellpadding 쪽에 `'${requestScope.cellpadding}'` 을 값으로 넣어주면 된다.  

#

`common.jsp` 정리
![`common.jsp` 정리](https://github.com/SungWoo0315/study-repository/blob/main/image-save/20210915%201154_common_%EC%A0%95%EB%A6%AC_.png)    




common2.jsp

common_key.jsp
common_api.jsp
common_js.jsp

> 연결 순서를 잘 정해야 한다.  
> JQuery 파일 수입 후, js 쪽이 실행 되어야 한다.  
> 이런식으로 분류해서 한곳에 수입해서 사용할수 있다.  

> 어려우면 그냥 common.jsp 사용하면 된다.  

#

`common.jsp` 에서,  

헤더, 짝 홀 행 색상변경.  
```jsp
<!-- 헤더, 짝수행, 홀수행 색상 -->
<c:set var="headerTrColor" value="#1E9E9E" scope="request"/>
<c:set var="headerTrColor" value="#008C8C" scope="request"/>
<c:set var="oddTrColor" value="#CCE1FF" scope="request"/>
<c:set var="evenTrColor" value="#B0A0CD" scope="request"/>


<!-- 위 처럼 코드 지정하고 아래에서 EL 수입 -->

// *****************************************
// table 태그 내부의 배경색 바꾸는 함수 선언
// *****************************************
function changeBgColor(  ){
	setTrBgcolor( 
		// ---------------------------------------------------
		"tbcss0"        //tableClassV  //테이블 태그의 클래스값
		// ---------------------------------------------------
		,"${requestScope.headerTrColor}"   //"#AD9AEE"        //headBgcolor  //헤드 tr 의 배경색값
		// ---------------------------------------------------
		,"${requestScope.oddTrColor}"   //"#eef7ff"     //oddTrBgcolor //헤드 tr 이후의 홀수 tr 배경색값
		// , "white"	//주석 바꿔가면서 색상변경 할 수 있다.
		// , "red"
		// ---------------------------------------------------
		,"${requestScope.evenTrColor}"   //"#D2D2FF"   //evenTrBgcolor//헤드 tr 이후의 짝수 tr 배경색값
		// ---------------------------------------------------
		, "lightyellow"   //mouseOverBgcolor//마우스 댔을 때 배경색값
	);
}
```

----
### `12:30~`








----
### `13:20~`

  - 점심시간.

---
---

## # 오후수업

---
### `14:30~`










---
### `15:30~`









----
### `16:30~`








----
### `17:30~`








----
### `18:30~`


<추석과제>      

연락처 입력 수정 삭제,             
 
설계서 보고 만들어내기,      

#

리엑트 나가기 전에 자바스크립트 따로 공부 더 하기.  
