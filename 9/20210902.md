# 2021년 9월 2일 [77일차]

## # 오전수업
----
### `09:30~`

어제, 전반적인 검색화면 구현.   

#

기본 보여지는 행의 개수를 20으로 늘리고,      

행보기 선택옵션이 기본으로 20 지정되어 표현하고 싶을때?    

옵션태그중에 맨위에가 기본적으로 선택 됨.    

이것을 바꿔주려면,    

```html
  <option value="20" selected>20</option>
```
> 옵션 태그에서 `selected` 넣어준다.       
> 기본선택하고싶은것을 이렇게 바꿔줄 수 있다.        
> `BoardSearchDTO` 에서, `rowCntPerPage` 도 `20` 으로 바꿔주어야 한다.    

#

쿼리에서(오라클에서 행처리) 선택하지 않고,      

일단 다 가져오고,     

jsp 에서 반복문 돌리면서 선택하는방식..?     

엄청난 양의 데이터라면 엄청 로딩이 느려지고,    

비효율적이다.     

실수하지 않기.  

#

오라클에서 정순번호, 역순번호 구할 수 있다.  

쿼리로 날려서 정순, 역순 다 붙여서 가져오면 된다.  

페이징 처리 산술적 계산 공부되라고 진행함.  

#

- 페이지당 시작 역순번호.  

  > ![역순번호 설명](https://github.com/SungWoo0315/study-repository/blob/main/image-save/20210902%200952_%ED%8E%98%EC%9D%B4%EC%A7%80%EB%8B%B9%20%EC%8B%9C%EC%9E%91%20%EC%97%AD%EC%88%9C%EB%B2%88%ED%98%B8_%EC%84%A4%EB%AA%85_.png)    

`boardList.jsp` 에서,  

정순번호, 역순번호 설명.    

주석달기.    

```html
<div class="searchResult">

    <table border="1" style="border-collapse:collapse" cellpadding=5>
        <tr><th>번호</th><th>제목</th><th>작성자</th><th>조회수</th><th>등록일</th></tr>


    <%
        // ---------------------------------------------------------------------------
        // boardList 가 null 이 아니면, 검색결과물이 있으면,   + boardList 에는 ListMap 객체가 들어있다.  
        // ---------------------------------------------------------------------------
        if( boardList!=null){

            // mmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmm
            // 정순번호 => serialNo1
            // 역순번호 => serialNo2 , serialNo3 (페이지당 시작 역순번호)
            // 역순번호 = 총개수 - ( 선택페이지번호 * 한화면의행의개수 - 한화면의행의개수 + 1 )-1;
            // mmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmm
                // -----------------------------------------------
                // 선택한 페이지 번호에 맞는 검색결과물의 시작 정순번호 구하기
                // 선택한 페이지 번호에 맞는 검색결과물의 시작 역순번호 구하기
                // -----------------------------------------------
                int serialNo1 = selectPageNo * rowCntPerPage - rowCntPerPage + 1;

                int serialNo2 = getBoardListCount - ( selectPageNo * rowCntPerPage - rowCntPerPage + 1 ) + 1;

                int serialNo3 = getBoardListCount - serialNo1 + 1;

            // mmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmm


            // -----------------------------------------------
            // 검색결과물을 HTML 태그로 출력하기
            // boardList 안의 ArrayList 객체에 들어 있는 다량의 HashMap 객체를 꺼내어
            // HashMap 객체 안의 키값에 대응하는 문자를 꺼내어 HTML 태그로 출력하기 
            // -----------------------------------------------
            for( int i=0; i<boardList.size(); i++ ){
                
                // i 번째 HashMap 객체를 꺼내기
                
                Map<String,String> map = boardList.get(i);

                // i번째 HashMap 객체에 키값 b_no 에 대응하는 저장 문자열 꺼내기
                // i번째 HashMap 객체에 키값 subject 에 대응하는 저장 문자열 꺼내기
                // i번째 HashMap 객체에 키값 writer 에 대응하는 저장 문자열 꺼내기
                // i번째 HashMap 객체에 키값 readcount 에 대응하는 저장 문자열 꺼내기
                // i번째 HashMap 객체에 키값 reg_date 에 대응하는 저장 문자열 꺼내기
                // i번째 HashMap 객체에 키값 print_level 에 대응하는 저장 문자열 꺼내기

                String b_no = map.get("b_no");

                String subject = map.get("subject");
                String writer = map.get("writer");
                String readcount = map.get("readcount");
                String reg_date = map.get("reg_date");
                String print_level = map.get("print_level");

                int print_level_int = Integer.parseInt(print_level,10);
                // 들여쓰기 단계 번호에 맞게 공백을 누적하고 들여쓰기 단계가 1 이상이면 ㄴ 자 붙이기  
                String xxx = "";

                // 들여쓰기 단계 번호에 맞게 공백을 누적 시키기.   
                // 웹브라우저는 공백을 두칸밖에 인식 안하기 때문에 `&nbsp;` 사용한다.
                for( int j=0; j<print_level_int; j++){

                    xxx = xxx + "&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;";
                }
                if( print_level_int > 0 ){xxx = xxx + " &#10551; "; }
                // HTML 또는 문자열로 표현하기.  
                out.println("<tr style='cursor: pointer;' onclick='goBoardContentForm("+b_no+")'><td>"
                                + (serialNo3--) 
                                +"<td>" + xxx + subject + "<td>"+writer+"<td>"+readcount+"<td>"+reg_date);

            }
        }    
    %>
    </table>
</div>
```
> `get()` 은 ArrayList 의 메서드,  
> 값을 가져온다.  

> 웹브라우저는 공백을 두칸밖에 인식 안하기 때문에 `&nbsp;` 사용한다.  

위에서, 보아야 할 부분,  

```html
  <!-- 이 부분과 -->
  // mmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmm
  // 정순번호 => serialNo1
  // 역순번호 => serialNo2 , serialNo3 (페이지당 시작 역순번호)
  // 역순번호 = 총개수 - ( 선택페이지번호 * 한화면의행의개수 - 한화면의행의개수 + 1 )-1;
  // mmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmm

  int serialNo1 = selectPageNo * rowCntPerPage - rowCntPerPage + 1;

  int serialNo2 = getBoardListCount - ( selectPageNo * rowCntPerPage - rowCntPerPage + 1 ) + 1;

  int serialNo3 = getBoardListCount - serialNo1 + 1;

  // mmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmm

  <!-- 아래 부분의 (serialNo3--) 를 보아야 한다 -->
  out.println("<tr style='cursor: pointer;' onclick='goBoardContentForm("+b_no+")'><td>"
                + (serialNo3--) 
                +"<td>" + xxx + subject + "<td>"+writer+"<td>"+readcount+"<td>"+reg_date);
```
> 정순번호를 쓰려면 `serialNo1++` 로 바꾸어 주면 되고,  
> 역순번호 쓰러면 `serialNo2--` 혹은, `serialNo3--` 쓰면 된다. (두가지 방식)    

#

----
### `10:30~`

### # `boardList.jsp` 전체적 주석달기. 정리.  

POST 방식의 단점.     
form 태그를 꼭 만들고 입력양식도 들어가야 한다.    
대신 보안성이 뛰어나다.  

GET 방식으로 보내면,  
form 태그가 필요 없다.  
보안성이 낮아서 중요한 값들은 이방식 사용하지 않는다.  
파라미터값이 없이 이동할때 쓰거나 중요하지 않는 값들을 가지고 이동할 때 사용.    

#

(입) 입사시험

`location.replace('/boardRegForm.do');` 사용하지 않고,  

`document.xxx.submit()` 을 사용하면?   
  
밑에 form 태그를 만들어서 action 값으로 이동해야 한다.    
`<form name="xxx" method="post" action="/boardRegForm.do">`   

#

- PK(primary key)

  컬럼에 주는 제약 조건 중의 하나.  

  1. not null
  2. unique
  3. FK 가 언젠가 참조할 수도 있는,  

  테이블 만들 때,   
  컬럼에 부여하는 제약 조건의 한 종류.      

#

----
### `11:30~`








----
### `12:30~`








----
### `13:20~`

  - 점심시간.

---
---

## # 오후수업

---
### `14:30~`










---
### `15:30~`









----
### `16:30~`








----
### `17:30~`








----
### `18:30~`

이번달 중순에 프로젝트 팀 구성.    

프로젝트 최소 테이블 30개 이상.    

페이지도 많이야 하고, 로직도 많이 들어갈수록 좋음.    

프로젝트 기간 3주.    

10월 말까지는 프로젝트가 완성될 예정.  