# 2021년 6월 28일 [33일차]

## # 오전수업
----
### `09:30~`

오전 진행 일정 : 인라인뷰(inline view) => jsp  

오후 진행 일정 : 오라클 문제 설명 & 복습.  

#


### <139> [인라인뷰(=Inline view)] 가 뭡니까? `*****`  

`inline view`  

from 절에 나오는 select 를 말한다.  
from 절에는 테이블명이 나온다.  
이 자리에 select 나올 경우 select 결과물을 테이블로 생각하면 된다.  

from 절 안에 select 가 나온다. 서브쿼리라고 하지 않고 `inline view` 라고 한다.    

사용빈도가 아주 높다.  

----
### `10:30~`

### <140> 연봉 서열대로 직원을 검색하되 1행부터 10행까지만 검색하면?

select 결과물을 웹 브라우져로 보여줄때, 검색 결과를 지정한 개수만큼 끊어서 보여주는것. JSP 관련. => `페이징 처리`  

현업은 게시판소스에서 파생.  

오라클은 자동으로 어떤 테이블이건 간에 모든 select결과물에 rownum컬럼을 붙여 일련번호까지 넣어준다.  

rownum은 정렬한다음에 붙여준것이 아니라, order by 전에 붙여버려서 진행되어서 일련번호가 뒤엉킨다. 원하는 결과를 얻을 수 없음.  

> 인라인뷰 기본 문법

```SQL  
SELECT column_list
FROM (SELECT * FROM table_name) [alias]
WHERE 조건식;
```

```SQL  
select
	*
from
	(select * from employee order by salary desc)
where
	rownum<=10
-- 정답은 맞지만 다른 행 검색 조건에선 틀릴수 있다.
-- rownum이 where절에 들어갈때 rownum 1이 들어가서 true 되는 조건만 나올수 있는데,
-- rownum>=11 에서 1이 포함 안되기 때문에 false.
-- 이런식으로는 행 검색을 할 수 없다.

--정답1.
select
	*
from
(
select
	rownum RNUM, e.*
from
	(select * from employee order by salary desc) e
where
	rownum<=10
)
where
	RNUM>=1

--정답2.
select
	*
from
(
select
	rownum RNUM, e.*
from
	(select * from employee order by salary desc) e
)
where
	RNUM>=1 and RNUM<=10;

-- where rownum<=10 을 안쪽에서 실행하지 않고 바깥쪽 where절에서 RNUM으로 1~10 조건을 주어도 된다. RNUM이 일반 컬럼으로 인식되기 때문. 그렇지만 속도차이가 2배 이상 난다.  
MYSQL 은 limit 로 처리 가능.

--패턴화.
select * from ( select rownum RNUM, 별칭.* from (
	원하는 정렬 select 문
) 별칭 where rownum<=마지막행번호 ) where RNUM>=시작행번호;

-- 추가문제
-- 고객을 나이대로 서열 정리. 6행부터 10행까지.
select * from ( select rownum RNUM, zxcvb.* from (
	select * from customer
	order by
		decode(substr(jumin_num,7,1), '1', '19', '2', '19', '20')||substr(jumin_num,1,6) asc
) zxcvb where rownum<=10 ) where RNUM>=6;

-- 추가문제
-- <새끼문제> 직원 직급 서열중 2행~5행 까지 검색하면?
-------------------------------------------------------------
select * from ( select rownum RNUM, zxcvb.* from (
	select * from employee
	order by
		decode(jikup, '사장', 1, '부장', 2, '과장', 3, '대리', 4, '주임', 5, 6) asc
) zxcvb where rownum<=5 ) where RNUM>=2;
```


> 인라인뷰 패턴화.  

```SQL  
--패턴화.
select * from ( select rownum RNUM, 별칭.* from (
	원하는 정렬 select 문
) 별칭 where rownum<=마지막행번호 ) where RNUM>=시작행번호;
```

----
### `11:30~`

















----
### `12:30~`








----
### `13:20~`

  - 점심시간.

---
---

## # 오후수업

---
### `14:30~`










---
### `15:30~`









----
### `16:30~`








----
### `17:30~`








----
### `18:30~`
