# 2021년 6월 11일 [22일차]

## # 오전수업
----
### `09:30~`

<복습>  
- Transaction : 모두 취소되거나 모두 완료되는 2가지 결과  
- Schema : [데이터베이스의 구조]에 대한 정의와 제약조건 등을 기술한 [명세서]   
[계정]이 생성한 모든 [객체]  

- DML  
테이블에 있는 데이터를 입력, 수정, 삭제, 검색 등의 작업.  
insert : 행단위 입력    
update : 셀 단위 수정  
delete : 행 단위 삭제  
select : 검색// Transaction을 걸어주지 않아도 된다.    

셀단위는 다 update.  
셀단위 입력은 없다.  
입력은 모두 행단위.  

- DDL   
CREATE -> Transaction을 걸 수 없다. Transaction 대상이 아니다.
ALERT  
DROP  
> 위 세가지는 ROLLBACK 대상이 아니다.  

- 제약조건 : 데이터가 들어올수 있는 조건. 조건 통과 못하면 **한 행이** 다 못들어감.


```
면접 팁.
예의 있지만 당당하게 답변하기.
```

----
### `10:30~`


###<9> 오라클에서 자료형의 종류는?  

오라클은 대문자가 원칙이지만 소문자도 상관은 없음.  

- CHAR(s)  
  넘치게 들어가면 행 자체가 못들어감.   
  모자라게 들어오면 나머지는 공백으로 들어감.   
  항상 길이가 똑같은(일정한) 경우 사용.  ex) 주민등록번호.   

  곱하고 빼고 더할 가능성이 없는것은 문자취급. ex) 주민등록번호.    
  애매하면 문자로 준 다음에 나중에 숫자로 바꾸는 함수가 있으므로.    
  고객번호는 무조건 숫자로 주어야 한다.  

  장점은. VARCHAR2 보다 오라클에 부하를 덜 준다.  

```
신입개발자 팁.

현업가서 너무 맡은 업무가 너무 과할때.

지시받은것. 할수 있는것. 할수 없는것. 등등.

왜 힘든지 이유를 기록해놓기.

현업 개발일지. 작성 필요.
```

```
현업가서 금기사항.

비효율적인 코딩이라도. 잘 돌아가면, 절대 건들이지 말것..!!!!

그대로 이용 할 것.
```

- VARCHAR2(s)    
  가변.   
  길이가 변하는 경우.    
  길이가 모자르게 들어도 알아서 맞춰준다. 공백이 안들어감.  
  (DB 서버 부담은 증가) => 그러나 크게 신경쓰지 않아도 된다. 성능이 좋아져서.

```
고객요청에따라 길이가 달라질 가능성이 있어서 CHAR 잘 쓰지 않는다.  
실무에서는 VARCHAR2를 주로 사용.  
실제 개발할땐 넉넉하게 준다. (개발과정중에는.. 거의 완성하고 조절.)
```

----
### `11:30~`

▶CHAR 는 CHAR(1) 과 동일. ex) 성별 표현. m/w 두가지만. 표현하기 때문.  

▶VARCHAR2 만 쓸수는 없다. // CHAR랑 혼동하지 말것!!   


- NUMBER(p,s)

  <예> NUMBER(6, 2) 라고 지정한 컬럼에 1234.56 저장하면? 1234.56 저장.   
  => 6은 전체 자릿수.// 2는 소숫점 자릿수.56 // 정수1234 4자리.  
\
  <예> NUMBER(6, 2) 라고 지정한 컬럼에 1234.567 저장하면? 1234.57 저장.  
  => 반올림 한 후 소수점 2자리 까지 저장.  
\
  <예> NUMBER(6, 2) 라고 지정한 컬럼에 12345.6 저장하면?  
  => 정수가 넘치면 안됨. 자릿수 부족으로 오류가 난다.  

```
테이블에.  
오류가 난다는것은.  
행자체가 못들어간다.  

그 이유는?

☆ 자료형 위배.
☆ 제약조건 위배.
```

\
  ex) NUMBER(3) => 0~999까지 들어감. 정수만.  



- DATE

```SQL  

변환함수. 제대로 공부하기.

TO_CHAR : 날짜 자료형을 문자로 취급해서 화면에 출력할때 사용.
TO_DATE : 계산용도.

날짜끼리 계산하기 위해서 문자형으로 표기된 날짜를 TO_DATE로 날짜로 바꿔줌.

to_date('2021225', 'YYYYMMDD')-to_date('20210611', 'YYYYMMDD')

'20211225' - '20210611'  => 이것은 안됨.

```

----
### `12:30~`

sysdate : 오늘날짜.

```SQL
<참고>
select sysdate from dual => 오늘날짜를 보여달라는 구문.
> 우리가 알고있는 형식으로는 안나옴.

select to_char(sysdate. 'YYYY-MM-DD') from dual
> 이렇게 작성해야지 우리가 익숙한 형태로 나옴.

> to_char : 날짜데이터를 보기좋게 출력하려고씀
> TO_DATE : 계산용도.
```


### <10> 오라클에서 제약조건의 종류는? (입, 기, 실)

- not null
- unique
- default
- check
- Primary
- foreign key

중복되지 않을정도로 고유한것이면. 중요한 데이터이다.  

그렇기 때문에  

일반적으로 또는 관용적으로, 실무적으로 unique 을 가진 컬럼은 not null 도 같이 들어간다.  

<주의>  
unique면 실무적으로 not null 이지만  
not null 이면 반드시 unique 는 아니다!  

default가 걸려있으면 기본적으로 not null이 안걸려 있지만, 걸려있는것 같은 효과를낸다.


```
기사 시험에 단한번도 빠지지 않는 부분.
----------------
Primary key(PK)
----------------
foreign key(FK)
----------------

```

----
### `13:20~`

  - 점심시간.

---
---

## # 오후수업

---
### `14:30~`

<제약조건 종류 복습>   

Primary => 인덱스가 걸리는것도 추가. 나중에 배움.  

FK 가 있으면 반드시 PK가 있지만  
PK가 있다고 반드시 FK가 있는것은 아니다.  

```
employee
=================================================
e_no    e_name    dep_name    salary    jikup
=================================================
1       사오정     관리부     5000      대리
2       저팔계     영업부     6000      과장
3       손오공     자재부     7000      부장
```
![](https://github.com/SungWoo0315/study-repository/blob/main/image-save/20210611%201459.jpg)


PK로 설정한 컬럼의 특징은 not null, unique, foreign key에 참조당함.  

PK 가 있는 테이블이 먼저 만들어져야 한다.   
FK 안주면 존재하지 않는 직원번호가 들어갈 수 있다.   

제약조건은 반드시 들어가는게 아니라,  
필요에 의해서 주는것.  

ex) 소속부서가 안정해졌을 경우, 직급이 안정해졌을 경우 등.

```
employee
=================================================
e_name    dep_name    salary    jikup   jumin_num
=================================================
사오정     관리부     5000      대리    901225-1234543
저팔계     영업부     6000      과장    ~
손오공     자재부     7000      부장    ~
사오정     관리부     5000      대리    901225-1234543
```
> 주민등록번호가 착오로 겹칠수도 있기 때문에 데이터베이스 설계자가 부여하는것이 안전.

PK를 주는 이유는 not null unique 특징이 있으므로.   
행과 행을 구분하기 위해 의도적으로 부여.  
고유적, 절대적.  

---
### `15:30~`

### <Oracle 환경 설치하기>

`OracleXE_11g_112_Win64` => 개발자 연습용 버전.

오라클 원본은 리소스를 많이 잡아먹기 때문에.

10버전 => 11버전. 빠르게 무료 업데이트.
> 버그 때문에..해준듯?

```
노트북.

정전대비 배터리가 있어서 사용하는것.

현업가면.

프로젝트 5~6개월.

보안이 철저해서 노트북 들고가면 끝날때까지 들고나오기 번거롭다.
```

<이미지첨부>  

포트번호`1521`,`8080`는 내선번호와 같은 역할.     
외부통신용.  

오라클 자체 접속 웹브라우저 포트 `8080`  

접속 툴 : 토드, SQLGate.    

cmd.exe 관리자권한 실행해서 SQLGate 설치.  

호스트 - 접속하고싶은 오라클 ip주소.  
> 나한테 접속하고 싶으면 localhost.  

```
현업에서 화장실 갈때.   
켜놓고 가면 안됨.   
암호걸어서 잠금하고 다니기.  
```

오라클 정식버전은 중간에 암호말고 클라이언트가 접속할때 볼수있는 서비스 이름지어주어야 함.  

----
### `16:30~`

### <Oracle 접속 안될때>

1. 오라클 서버가 깔려있지만 켜져있지 않는경우.  
2. 기존 프로그램과의 충돌.  


`Computer Management.msc` 에서.  
OracleServiceXE 중지 시키고 다시 시작해보기.  


### <SQLGate다시 실행 방법>  
SQLGate.exe 실행 하려면 => 관리자권한 cmd.exe로 실행.  

SQLGate로 들어가서 보는것이 오라클 내부.  


```SQL
select * from help
```
> 명령어를 친다고 자동실행 안됨.  
> 드래그 해서 ▶실행 눌러야 코딩 실행됨.  or  드래그 한 다음 F5키 눌러주기  
> 드래그 한것만 실행됨.  

> 드래그 안하고 실행하면, 화면의 모든것이 실행.  
> 2개이상 명령문이면 `;`을 써서 구분해주어야 한다.

> `;` 없으면 오류가 난다.  


<이론수업 다시 시작>

하나의 테이블에 PK를 하나이상 줄 수 있나? ===> 안된다.  
각 테이블의 PK는 하나만 있을수 있다.  
0~1개 줄 수 있다.

```
이론적으론 0개 할순 있지만

실무적으론 1개 있어야한다.
```

FK는 몇개 줄 수 있을까?  ===> 동일 테이블에 0개 이상 줄 수 있다.

<예시>

```
dept
=====================================================
dep_no(PK)     dep_name   
=====================================================
10             관리부
20             자재부
30             홍보부
40             사업부


                  employee
===============================================================
e_no(PK)     e_name    dep_no(FK)    salary  jikup     mgr_e_no(FK)
===============================================================
1         사오정       10            5000     대리       3
2         저팔계       20            6000     과장       3
3         손오공       30            7000     부장       null
4         사오정       40            5000     대리       2


            customer
=====================================================
c_no(PK)     c_name    phone  e_no(FK)
=====================================================
1         사오순        ~     2
2         저팔순        ~     4
3         손오순        ~     1
4         사오순        ~     2

```
> 테이블 작성 순서는 dept => employee => customer  
> 테이블 삭제 순서는 거꾸로!  

> PK 적용된 dept테이블의 행은 삭제가 불가능하다.  => employee에서 참조 하고 있기 때문.
```
어거지로 10번 관리부를 지우려면.

customer의 손오순을 지우고, // e_no(FK) 1인 사오정을 참조하고 있어서...

employee의 사오정을 지우고 // dep_no(FK) 10인 관리부를 참조하고 있어서...

그다음 10번 관리부를 지워야 한다.
```

> 참조당하지 않는것이 있는 PK 행은 지울 수 있다.

----
### `17:30~`








----
### `18:30~`

다음주부터 메인 수업. 오라클 본격적으로...

월요일 오라클 재설치 및 SQLGate 재설치.
