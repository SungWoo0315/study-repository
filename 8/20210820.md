# 2021년 8월 20일 [68일차]

## # 오전수업
----
### `09:30~`

<복습>   

어제 작업한것 복습.  

#

`/loginForm.do` 접속시,  

`@RequestMapping("/xxx.do")` 가 붙은 xxx1 메소드 작동.  
> `/xxx.do` 가 `/loginForm.do` 이다.  

ModelAndView 객체에 저장된 JSP 페이지 호출.  
> `loginForm.jsp`   

비동기방식 `ajax` 작동,  
`/loginProc.do` 로 접속.  

`LoginController.java` 통해서 `loginProc.jsp`의 파라미터값 꺼내고 리턴.    

#

임의로 DB 연동한것처럼 값을 주었지만,   
오늘 DB 연동 작업 들어간다.  

#

콘솔창에서 id pwd 값들을 확인하고싶을 때 아래와 같이 코딩하고 확인 할 수 있다.  
```java
System.out.println( "id => " + id );

System.out.println( "pwd => " + pwd );
```

#

아이디 암호 들어있는 테이블 설계.  (오라클)   

spring tool suite 에서,     

sql 폴더 안에, 

`DB_table.sql` 파일 만들기. (확장자 .txt 해줘도 된다.)  

테이블 만드는 쿼리문 작성.  

```SQL
create table login(
	login_no         number(3)                       -- 정수 0~999 까지 저장.
	,login_id        varchar2(20) not null unique    -- 로그인 아이디 저장
	,pwd             varchar2(20) not null           -- 암호
	,primary key(login_no)

);

insert into login values(1,'abc', '123');
insert into login values(2,'xyz', '123');
insert into login values(3,'tom', '123');

commit;


select * from login
```
> 항상 쿼리문 날리고, `commit` 잊지말기.

----
### `10:30~`

@Service 와 @Transactional 어노테이션이 붙은 객체 안의 xxx2 메소드  

@Repository 어노테이션이 붙은 객체의 xxx3 메소드  
과정 생략하고,
> 트랜잭션이 필요하지 않을땐 생략하고 작업.   

SqlSessionTemplate 객체의 메소드  
작업부터 시작, 

#

`LoginController.java` 에서 코딩.  
```java  
package com.naver.erp;

import javax.servlet.http.HttpServletRequest;

import org.mybatis.spring.SqlSessionTemplate;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Controller;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.servlet.ModelAndView;

// ---------------------------------------------------------------
// URL 주소로 접속하면 호출되는 메소드를 소유한 [컨트롤러 클래스] 선언
// @Controller 를 붙임으로써 [컨트롤러 클래스]임을 지정한다.
// ---------------------------------------------------------------
@Controller
public class LoginController {

    // ++++++++++++++++++++++++++++++++++++++++
    // SqlSessionTemplate 객체를 생성해 속성변수 sqlSession 에 저장
    // @Autowired 어노테이션을 붙이면 자료형에 맞는 SqlSessionTemplate 객체를 생성한다.
    // 결국 속성변수 sqlSession 에는 SqlSessionTemplate 객체의 메위주가 저장되어 있다.  
    // SqlSessionTemplate 객체의 메소드를 이용하면 xml 에 저장된 SQL 구문을 읽어 DB 연동을 할 수 있다.  
    // ++++++++++++++++++++++++++++++++++++++++
    @Autowired
    private SqlSessionTemplate sqlSession;  
```
> `@Autowired` 수입.    
> `private SqlSessionTemplate sqlSession;`   
> 속성변수 `sqlSession` 변수안에 `SqlSessionTemplate` 객체의 메위주를 넣어야 하는데,  
> 이것을 `@Autowired` 어노테이션을 붙이면,    
> 알아서 자료형에 맞는 `SqlSessionTemplate` 객체 생성하고 넣어준다.

> DB 연동하기 위해 `SqlSessionTemplate` 객체를 생성한 것이다.    
> `SqlSessionTemplate` 객체의 메소드를 이용하면 xml 에 저장된 SQL 구문을 읽어 DB 연동을 할 수 있다.     

#

`src/main/java` 경로안의,  
`com/naver/erp` 경로에 `xml` 파일 만들어주어야 한다.    
> `mapper_login.xml` 파일 생성.  
```xml
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.naver.erp.LoginDAO">
    <select id='getIdCnt' parameterType="hashmap" resultType="int">
        select count(*) from login where login_id=#{login_id} and pwd=#{pwd}
    </select>
</mapper>
```
> select.  

----
### `11:30~`








----
### `12:30~`








----
### `13:20~`

  - 점심시간.

---
---

## # 오후수업

---
### `14:30~`










---
### `15:30~`









----
### `16:30~`








----
### `17:30~`








----
### `18:30~`
