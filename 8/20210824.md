# 2021년 8월 24일 [70일차]

## # 오전수업
----
### `09:30~`

<오늘진도예정>   

새글쓰기 DB 넣기 완성하는것,    
DB 게시판 글 화면 가져와서 보이게 하기. (select)    

#

< 어제 이어서 코딩 >  

`BoardController.jsp` 에서 시작.  

```java
@Controller
public class BoardController {

    // mmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmm
    // 속성변수 boardService 선언하고 [BoardService 인터페이스]를 구현한 클래스를 찾아 객체 생성해 객체의 메위주를 저장.
    // mmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmm
        // @Autowired 역할 -> 속성변수에 붙은 자료형인 [인터페이스]를 구현할 [클래스]를 객체화하여 객체의 메위주를 저장한다.
        // [인터페이스]를 구현한 [클래스]가 1개가 아니면 에러가 발생한다.  
        // 단, @Autowired( required=false ) 로 선언하여 [인터페이스]를 구현할 [클래스]가 0개 이어도 에러없이 null 이 저장된다.    
    @Autowired
    private BoardService boardService;
```

```java
  // *********************************************
  // check_BoardDTO 메소드를 호출하여 [유효성 체크]하고 경고문자 얻기
  // *********************************************

  // *********************************************
  // [BoardServiceImpl 객체]의 insertBoard 메소드 호출로
  // 게시판 글 입력하고 [게시판 입력 적용행의 개수] 얻기
  // *********************************************
  int boardRegCnt = this.boardService.insertBoard(boardDTO); 
```
> DTO 안에 파라미터값이 있다고 보면 된다.  
> ORM 기술은 유지보수가 적고, 테이블 단순한 쿼리 자동으로 하고싶을때 사용. 고객 요구사항을 맞추기 힘들다.  

insert 실행결과는 1 아니면 에러.  

update 와 delect 는 0 이상 또는 에러.    
where 절에 의해서 결과가 없을수 있으므로 0이 나올 수 있다.  


`인터페이스`의 모든 `메서드`의 `접근지정자`는 public 이고,  
public 을 생략해도 public 이지, defualt가 아니다! 주의 하기!! 


![인터페이스 정의](https://github.com/SungWoo0315/study-repository/blob/main/image-save/20210824%201008_interface_.png)  

```
<인터페이스의 정의>  

public, static, final 의 성격을 가진 [속성변수]와   
public, abstract 의 성격을 가진 [메소드]로 구성된,  
클래스와는 다른 단위프로그램이다.  
```

#






----
### `10:30~`

`BoardServiceImpl.java` 에서 추가 코딩.  

```java

import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Service;
import org.springframework.transaction.annotation.Transactional;

// mmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmm
// [서비스 클래스]인 [BoardServiceImpl 클래스]선언
// mmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmm
    // [서비스 클래스]에는 @Service 와 @Transactional 를 붙인다. 
    // mmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmm
    // @Service         => [서비스 클래스] 임을 지정하고 bean 태그로 자동 등록된다.
    // @Transactional   => [서비스 클래스]의 메소드 내부에서 일어나느 모든 작업에는 [트랜잭션]이 걸린다.  
// mmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmm
@Service
@Transactional
public class BoardServiceImpl implements BoardService {

    // mmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmm
    // 속성변수 boardDTO 선언하고, [BoardDTO 인터페이스]를 구현한 클래스를 객체화 해서 저장한다.
    // mmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmm
        // @Autowired 역할 => 속성변수에 붙은 자료형인 [인터페이스]를 구현한 [클래스]를 객체화하여 저장한다.
    // mmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmm
    @Autowired
    private BoardDTO boardDTO;

    
    // ****************************************************
    // [1개 게시판 글 입력 후 입력 적용 행의 개수] 리턴하는 메소드 선언
    // ****************************************************
    public int insertBoard( BoardDTO boardDTO ){

        // ---------------------------------------
        // BoardDAOImpl 객체의 insertBoard 메소드 호출하여 게시판 글 입력 후 입력 적용 행의 개수 얻기
        // ---------------------------------------
        int boardRegCnt = this.boardDAO.insertBoard(boardDTO);
        // ---------------------------------------
        // 1개 게시판 글 입력 적용 행의 개수 리턴하기
        // ---------------------------------------
        return boardRegCnt;



      }

}
```

#

`BoardDAO.java` 생성.    
```java
package com.naver.erp;

public interface BoardDAO {

    // ****************************************************
    // [게시판 글 입력 후 입력 적용 행의 개수] 리턴하는 메소드 선언
    // ****************************************************
    int insertBoard(BoardDTO boardDTO);
	
	
	
}
```

#

`BoardDAOImpl.java` 생성.  
```java  
package com.naver.erp;

import org.apache.taglibs.standard.lang.jstl.test.beans.PublicInterface2;
import org.mybatis.spring.SqlSessionTemplate;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Repository;
import org.springframework.stereotype.Service;
import org.springframework.transaction.annotation.Transactional;

// mmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmm
// [DAO 클래스]인 [BoardDAOImpl 클래스] 선언
// mmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmm
    // @Repository 를 붙임으로써 [DAO 클래스]임을 지정하게 되고, bean 태그로 자동 등록된다.  
// mmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmm
@Repository
public class BoardDAOImpl implements BoardDAO {

    // ******************************************************
    // 속성변수 sqlSession 선언하고, [SqlSessionTemplate 객체]를 생성해 저장
    // ******************************************************
        // @Autowired 역할 -> 속성변수에 붙은 자료형이 [인터페이스]면 이를 구현한 [클래스]를 객체화하여 저장한다.
        // @Autowired 역할 -> 속성변수에 붙은 자료형이 [클래스]면 이를 객체화 하여 저장한다.  
    @Autowired
    private SqlSessionTemplate sqlSession;    

    // ******************************************************
    // [게시판 글 입력 후 입력 적용 행의 개수]를 리턴하는 메소드 선언
    // ******************************************************
    public int insertBoard(BoardDTO boardDTO){

        // ----------------------------------------------
        // SqlSessionTemplate 객체의 insert 메소드 호출로
        // 게시판 글 입력 SQL 구문을 실행하고 입력 성공 행의 개수 얻기.
        // ----------------------------------------------
        int boardRegCnt = sqlSession.insert(

            // ----------------------------------------------
            // 실행할 SQL 구문의 위치를 지정하기.
            // 실행할 SQL 구문의 위치 문자열 패턴은 아래와 같다.
            // xml 파일 중에 "mapper태그의namespace명.mapper태그내부의호출할SQL구문소유한태그id값"
            // ----------------------------------------------
            "com.naver.erp.BoardDAO.insertBoard"  
            // ----------------------------------------------
            // 호출할 SQL 구문에서 사용할 데이터 지정하기
            // ----------------------------------------------
            ,boardDTO                             
        );


        return boardRegCnt;
    }



}
```
> `insert()` 메서드는 입력지시 메서드이다.    


#

`mapper_board.xml` 파일 생성.  

```xml

```
> select 이외의 insert update delete 등에서는 `resultType` 이 없어도 무조건 정수이다.    
> `mapper_login.xml` 과 비교해보기.  

> `#` 의 의미, 꺼낸 데이터가 String 타입이면 `''` 싱글쿼트를 자동으로 붙여준다.  

> `DTO` 데이터를 꺼낼때 속성변수 명만 `#{subject}` 로 표기하면 된다.  

> max 앞에 `nvl` 붙은 이유는 맨 처음에 max 값이 없기 때문에 null이 나온다. 그러므로 `nvl` 를 써주어야 한다.  


----
### `11:30~`








----
### `12:30~`








----
### `13:20~`

  - 점심시간.

---
---

## # 오후수업

---
### `14:30~`










---
### `15:30~`









----
### `16:30~`








----
### `17:30~`








----
### `18:30~`
