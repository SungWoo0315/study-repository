# 2021년 8월 26일 [72일차]

## # 오전수업
----
### `09:30~`

오늘 할 예정.

상세보기화면,  

상세보기 화면 댓글쓰기 + 수정화면  

#

<복습>  

`boardList.jsp` 에서,  
form 태그, PK 번호 이용하면서, 페이지 이동.  
`상세보기 화면`으로 이동 함수 `goBoardContentForm()`   
> form 태그 ajax가 없으면 페이지 이동이 대부분이다.    
`document.boardContentForm.submit();`  
로 인해서 `/boardContentForm.do` 접속  


`BoardController.java` 에서,    
`/boardContentForm.do` 접속 시 호출되는 메소드, `goBoardContentForm( )` 
> 클릭한 행의 상세보기화면 볼 수 있도록...    
> DB 연동해서 클릭한 행의 DB 연동할 예정.  

#

### # 어제 이어서 코딩.  

`BoardController.java` 에서 이어서 코딩.  

```java
// ******************************************
  // [BoardServiceImpl 객체]의 getBoard 메소드 호출로 [1개의 게시판 글]을 BoardDTO 객체에 담아오기
  // ******************************************
  BoardDTO board = this.boardService.getBoard(b_no);
```
> 주석 처리 했던것을 열어준다.  

#

`BoardService.java` 에서, 메소드 추가.    

```java
// ****************************************************
// [1개 게시판 글] 리턴하는 메소드 선언
  // ****************************************************
BoardDTO getBoard(int b_no);
```

#

`BoardServiceImpl.java` 에서,    
메소드 선언.    

```java
// ****************************************************
  // [1개 게시판 글] 리턴하는 메소드 선언
// ****************************************************
  public BoardDTO getBoard(int b_no) {
      // -------------------------------------------
      // BoardDAOImpl 객체의 getBoard 메소드를 호출하여
      // [1개 게시판 글]을 얻는다
      // -------------------------------------------
      BoardDTO board = this.boardDAO.getBoard(b_no); 
      // -------------------------------------------
      // [1개 게시판 글]이 저장된 BoardDTO 객체 리턴하기
      // -------------------------------------------
      return board;

  }
```
> 하나의 SQL 구문에 해당하는 DB 연동.  
> `boardDAO` 쪽으로 넘긴다.  

#

`BoardDAO` 에서, 
```java
// ******************************************************
// [1개의 게시판 정보]를 리턴하는 메소드 선언
// ******************************************************
BoardDTO getBoard(int b_no);
```

#

`BoardDAOImpl.java` 에서, 
```java
// ******************************************************
// [1개 게시판 글 정보] 리턴하는 메소드 선언
// ******************************************************
public BoardDTO getBoard(int b_no){

    // -------------------------------------------
    // [SqlSessionTemplate 객체]의 selectOne(~,~) 를 호출하여 [1개 게시판 글 정보] 얻기
    // selectOne 은 1행 m열의 select 결과를 얻을 때 사용하는 메소드이다.  
    // -------------------------------------------
    BoardDTO board = this.sqlSession.selectOne(
        //-----------------------------------------------
        // 실행할 SQL 구문의 위치를 지정하기.
        // 실행할 SQL 구문의 위치 문자열 패턴은 아래와 같다.
        // xml 파일 중에 "mapper태그의namespace명.mapper태그내부의호출할SQL구문소유한태그id값"
        //-----------------------------------------------
        "com.naver.erp.BoardDAO.getBoard"	// 실행할 SQL 구문의 위치 지정
        //-----------------------------------------------
        // 실행할 SQL구문에서 사용할 데이터 지정하기
        //-----------------------------------------------
        ,b_no								// 실행할 SQL 구문에서 사용할 데이터 지정

    );                       

    // -------------------------------------------
    // [1개 게시판 글 정보] 리턴하기
    // -------------------------------------------
    return board;

}
```
> `mapper 태그`의 네임스페이스 명을 따라 들어가서 xml 파일에서 SQL 구문 실행.    

----
### `10:30~`

`mapper_board.xml` 이동,  
쿼리문 작성.  

```xml
<!-- ********************************************************************* -->
<!-- 게시판 1개 글 검색하는 select 문을 내포한 select 태그 선언 -->
<!-- ********************************************************************* -->
<select id="getBoard" parameterType="int" resultType="com.naver.erp.BoardDTO">

    select
    
        b_no            "b_no"
        ,subject        "subject"
        ,writer         "writer"
        ,readcount      "readcount"
        ,content        "content"
        ,pwd            "pwd"
        ,email          "email"
        ,group_no       "group_no"
        ,print_no       "print_no"
        ,print_level    "print_level"

    from board 

    where 
        b_no=#{b_no}

</select>
```
> 외부에 참여하는 데이터 종류는 `int`     
> `select` 실행 결과는 `BoardDTO 객체`안에 담아서 저장하고 리턴.    

> `외부참여 데이터`, `int` `double` `String` 은 단발성의 데이터는 `where` 절에서 임의지정 가능하다.  

> 한행의 데이터를 담을때 해시맵은 String 통일해주어야 하지만,  
> DTO 객체는 통일 안해줘도 된다.  
> 대신, `알리아스`를 `속성변수명`과 동일하게 해주면 된다.  
> 오라클의 자료형과 DTO 자료형이 일치하기 때문.
> 오라클의 자료형과 DTO 객체 속성변수 자료형이 맞아 떨어져야 DTO 객체안에 들어간다.      

#

`BoardController` 에서, 

```java 
//mmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmm
// /boardContentForm.do 접속 시 호출되는 메소드 선언
//mmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmm
@RequestMapping( value="/boardContentForm.do" )
public ModelAndView goBoardContentForm( 
        @RequestParam(value="b_no") int b_no
){

    // ******************************************
    // [BoardServiceImpl 객체]의 getBoard 메소드 호출로 [1개의 게시판 글]을 BoardDTO 객체에 담아오기
    // ******************************************
    BoardDTO boardDTO = this.boardService.getBoard(b_no);


    //*******************************************
    // [ModelAndView 객체] 생성하기
    // [ModelAndView 객체]에 [호출 JSP 페이지명]을 저장하기
    //*******************************************
    ModelAndView mav = new ModelAndView( );
    mav.setViewName("boardContentForm.jsp");
    mav.addObject("boardDTO", boardDTO);

    //*******************************************
    // [ModelAndView 객체] 리턴하기
    //*******************************************
    return mav;
}
```
> `mav.addObject("board", board);` 이 부분을 수정.    
> `BoardDTO` 객체를 담는다.    

#

`boardContentForm.jsp` 로 이동,    
단순 PK 번호 꺼내는것 대신에 boardDTO 객체를 꺼내도록,  

```html

<!-- ***************************************************** -->
<!-- 현재 JSP 페이지에서 사용할 클래스 수입하기 -->
<!-- ***************************************************** -->
<%@ page import="com.naver.erp.BoardDTO"%>





<%
    BoardDTO boardDTO = (BoardDTO)request.getAttribute("boardDTO");
    int b_no = boardDTO.getB_no();
    String subject = boardDTO.getSubject();
    String writer = boardDTO.getWriter();
    String reg_date = boardDTO.getReg_date();
    String content = boardDTO.getContent();
    int readcount = boardDTO.getReadcount();
    String email = boardDTO.getEmail();

%>

<b>[글 상세 보기]</b>
<table border="1" style="border-collapse:collapse" cellpadding=5>
    <tr align="center">
        <th bgcolor="lightgray">글번호</th>
        <td><% out.print(b_no); %></td>
        <th bgcolor="lightgray">조회수</th>
        <td><% out.print(readcount); %></td>
    </tr>
    <tr align="center">
        <th bgcolor="lightgray">작성자</th>
        <td><% out.print(writer); %></td>
        <th bgcolor="lightgray">작성일</th>
        <td><% out.print(reg_date); %></td>
    </tr>
    <tr align="center">
        <th bgcolor="lightgray">글제목</th>
        <td colspan="3"><% out.print(subject); %></td>
    </tr>
    <tr align="center">
        <th bgcolor="lightgray">글내용</th>
        <td colspan="3">
            <textarea name="content" rows="13" cols="45" style="border: 0;" readonly><% out.print(content); %></textarea></td>
    </tr>




</table>
```
> `get();` 메서드 사용해서 값을 꺼냄.  

> `BoardDTO` 객체를 사용하기때문에 수입 코딩도 해야 한다.  


----
### `11:30~`








----
### `12:30~`








----
### `13:20~`

  - 점심시간.

---
---

## # 오후수업

---
### `14:30~`










---
### `15:30~`









----
### `16:30~`








----
### `17:30~`








----
### `18:30~`
