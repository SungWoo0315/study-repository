# 2021년 8월 17일 [65일차]

## # 오전수업
----
### `09:30~`

<복습>  

각 `메서드` 암기해야 사용 가능.    

#

## # `Spring+JSP_교재_ver_01.txt` 교재 <문6> 메서드 이어서.  

### # [HttpServletResponse] 객체 메소드.   

```
  -------------------------------------
  void sendRedirect( "URL주소" )  ★★★
  -------------------------------------
      ▶️ 클라이언트의 웹브라우저에게 지정한 URL로 페이지로 이동을 요청한다.
      ▶️ sendRedirect 메소드 호출되면 [응답메시지]에 301 이란 상태정보가 저장되고,
          이 [응답 메시지]를 받은 웹브라우저는 바로 매개변수로 전해준 URL 주소로 웹서버에 재접속한다.  
      <주의> 이 때 웹브라우저는 먼저 [응답 메시지] 안의 HTML 소스를 모두 실행한 후 이 URL 주소로 웹서버에 재접속한다.  
```
> 긴박하고 특이한 상황이 발생했을 때 다시 강제적으로 URL주소로 재접속하게 만드는 기능.   
> 원래는 클라이언트가 원할때 접속 하는것인데, 웹서버가 강요하게 하는것.  

> `void` 도 `리턴형`이 맞다.    (입)
> 메서드 왼쪽에 붙는것이 `리턴형`.          
> 리턴될 데이터가 없다는 `리턴형`.           

#

```
  -------------------------------------
  void setContentType( type )  
  -------------------------------------
      ▶️ [응답 메시지]에 저장할 [HTML 소스]의 [문서종류], [문자셋]을 지정한다.    
      ▶️ <예> response.setContentType("text/html;charset=UTF-8");    
      ▶️ <참고> spring MVC 패턴 사용 시 개발자가 호출하지 않아도 spring 쪽에서 알아서 세팅해 준다.     
```
> Spring 에서 알아서 해주지만 참고.  

#

```
  -------------------------------------
  void addCookie( Cookie cookie ) ★★★
  -------------------------------------
      ▶️ 매개변수로 전해준 Cokkie 객체가 소유한 [쿠키명]과 [쿠키값]을 [응답 메시지]에 저장한다. 
          추후 [응답 메시지]를 받은 웹브라우저는 이 [쿠키명]과 [쿠키값]을 클라이언트 쪽에 파일로 저장한다.  
      -----------------
      <예> 
      -----------------
          //---------------------------------------------------------
          // Cookie 객체 생성하고 uname 라는 쿠키명으로 "홍길동" 이란 쿠키값 저장
          Cookie cookie = new Cookie( "uname", URLEncoder.encode("홍길동","EUC-KR") );
          cookie.setMaxAge(30*60);
          response.addCookie(cookie);
```
> 쿠키는 웹서버에 접속한 증거, 증빙자료.   
> 재 접속 했을 시 접속했던 사실을 증명하기위한.    

> 생명주기설정.  

> 참고, [HttpSession 객체]의 [고유아이디]가 [쿠키]로 저장되는것은 메모리 공간에 저장된다. 파일형태로 저장되지는 않는다.    

> `response` 변수 안에는 `HttpServletResponse`객체가 들어있다.  

----
### `10:30~`

- <기억하기> [웹브라우저]와 [웹서버]의 [연결 상태]를 `세션(=session)`이라고 부른다.  

### # [HttpSession] 객체 메소드.   

```
  --------------------------------------------------
  void setAttribute( "키값문자열", 저장객체 )  ★★★
  --------------------------------------------------
      ▶️ [키값문자열]에 [저장객체]를 연결하여 저장한다.
      ▶️ HttpServletRequest 객체의 setAttribute 메소드와 동일한 기능을 가진다.  
      ▶️ 주로 DB 연동 결과물을 저장한다.  
      ▶️ 주로 추후 재 접속 시 사용할 데이터를 저장할 때 호출하는 메소드이다.   
      ▶️ <예> 로그인이 성공하면 아이디 문자열을 setAttribute 를 사용하여 다음 처럼 저장한다.  
          session.setAttribute( "login_id", "abc" )  // "키값", "아이디"  
```
> 저장할 때 `( "login_id", "abc" )` 에는 `"키값", "아이디"` 이다.  

#

```
  --------------------------------------------------
  Object getAttribute( "키값문자열" )  ★
  --------------------------------------------------
      ▶️ setAttribute( "키값문자열", 저장객체 ) 메소드 호출로 저장된 객체를 꺼낼 때 호출되는 메소드이다.  
      ▶️ HttpServletRequest 객체의 getAttribute 메소드와 동일한 기능을 가진다.  
``` 
> ![Object](https://github.com/SungWoo0315/study-repository/blob/main/image-save/20210817%201101_Object_%EC%84%A4%EB%AA%85_.png)        
> Object 가 붙으면 임의의 모든 객체가 xxx에 들어간다.        
> xxx 에는 임의의 모든 데이터가 들어갈 수 있다.        

> Object 가 붙은변수 뭐가 저장될지 모르기 때문에 꺼낼때 `형변환`을 시켜줘야한다.    

#

```
  --------------------------------------------------
  void removeAttribute( "키값문자열" )  ★
  --------------------------------------------------
      ▶️ setAttribute( "키값문자열", 저장객체 ) 메소드 호출로 저장된 객체를 삭제하는 메소드이다.  

  --------------------------------------------------
  void setMaxInactiveInterval( int second )  
  --------------------------------------------------
      ▶️ 클라이언트의 재 접속이 없을 때 HttpSession 객체의 존재 수명을 초단위로 설정. 기본값은 30분.  
  --------------------------------------------------
  String getId( )  
  --------------------------------------------------
      ▶️ HttpSession 객체에 부여된 [고유 아이디]를 반환한다.  

  -------------------------------------
  기타 등등
  -------------------------------------
```

#


- `[HttpServletRequest] 객체`  

- `[HttpServletResponse] 객체`  

- `[HttpSession] 객체`    

  각 정의와 메소드 기억하기.  

----
### `11:30~`

### <문8> Model1 패턴으로 개발된 프로젝트에서 [웹브라우저]와 [웹서버]의 통신 과정을 상세히 쓴다면?

```
■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■
<문8> Model1 패턴으로 개발된 프로젝트에서 [웹브라우저]와 [웹서버]의 통신 과정을 상세히 쓴다면?
■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■
    -----------------------------------------------------------------------------------------------
    (1) 클라이언트 웹브라우저에서 http://~/xxx.jsp 형태의 [URL 주소]로 웹서버에 접속한다. xxx 는 임의의 영단어 이다.  
    -----------------------------------------------------------------------------------------------
    -----------------------------------------------------------------------------------------------
    (2) [웹서버]가 HttpServletRequest, HttpServletResponse, HttpSession 객체를 생성한다.  
    -----------------------------------------------------------------------------------------------
        재 접속이라면 HttpSession 객체가 생성 안될 수 있다.  
    -----------------------------------------------------------------------------------------------
★★(3) [웹서버]에서 [URL 주소]에 있는 xxx.jsp 파일을 호출하여 xxx.jsp 파일 안에서 필요에 따라 아래와 같은 일들을 진행한다.  
    -----------------------------------------------------------------------------------------------
        [요청메시지] 안의 파라미터값 또는 쿠키값을 꺼내어 DB 연동을 하고 얻은 결과물을 꺼내어 문자열로 표현하여 HTML 태그 사이에 삽입한다.  
        HttpSession 객체에 이전 접속 시 저장한 데이터가 있으면 꺼내서 원하는 작업을 한다. ex) 로그인 성공.
        클라이언트에게 보낼 쿠키명과 쿠키값을 Cookie 객체에 저장하고 Cookie 객체를 HttpServletResponse 객체에 저장한다.  
        ------------------------------------------------
        <참고> DB 연동은 jsp 파일 안에서 하지 않고 [DB 연동 자바 객체(=DAO 객체)]에 넘길 수도 있다. 
        ------------------------------------------------
        <참고> DAO (=Data Access Object)  (입) 입사시험 문제
        ------------------------------------------------
            DB 연동 기능의 메소드를 가진 자바 객체를 지칭한다.  
        ------------------------------------------------
        <참고> DTO (=Data Transfer Object)  (입) 입사시험 문제
        ------------------------------------------------
            DB 연동 시 사용되는 다량의 데이터를 관리하는 자바 객체이다.  
            ```
            private 리턴형 xxx; 
            public void setXxx(~){~}; 
            public 리턴형 getXxx(){~}; 
            ```
            가 한쌍으로 n개 쌍이 존재한다.
            Spring MVC 패턴 개발에서는 아주아주아주아주 중요한 역할을 한다.  > DTO 사용하면 코딩이 줄어들게 된다.    
    -----------------------------------------------------------------------------------------------
    (4) [웹서버]가 [응답 메시지] 준비한다.    
    -----------------------------------------------------------------------------------------------
        xxx.jsp 파일을 호출의 실행 결과인 [HTML 소스]를 [응답 메시지]에 저장한다.
        HttpServletResponse 객체가 소유한 Cookie 객체에서 [쿠키명과 쿠키값]을 꺼내어 [응답 메시지]에 저장한다.
        자원의 호출 성공 여부를 저장한다. 웹브라우저의 [재 접속 여부]를 저장한다.
        기타 데이터를 응답 메시지에 저장한다.
    -----------------------------------------------------------------------------------------------
    (5) [웹서버]가 웹브라우저에게 [응답 메시지]를 전송한다.    
    -----------------------------------------------------------------------------------------------
    -----------------------------------------------------------------------------------------------
    (6) 클라이언트의 웹브라우저에서 HTML 소스가 실행되어 웹하면에 결과를 본다.    
    -----------------------------------------------------------------------------------------------
        만약 자원의 호출 성공 여부가 부정적이라면 에러페이지가 실행된다.
        만약 [재 접속 여부]가 있다면 웹서버에 접속을 시도한다.
```
> DTO 사용하면 코딩이 줄어들게 된다.

> Model1 방식은 보안성이 떨어지고 유지보수가 힘들다.  

> 자원명이 URL주소를 노출.  

#

### <문9> Model2 패턴으로 개발된 프로젝트에서 [웹브라우저]와 [웹서버]의 통신 과정을 상세히 쓴다면?

```

```
>


----
### `12:30~`








----
### `13:20~`

  - 점심시간.

---
---

## # 오후수업

---
### `14:30~`










---
### `15:30~`









----
### `16:30~`








----
### `17:30~`








----
### `18:30~`

문<9>  

문<10>   

암기하기.  

#

내일부터 웹서버 구축 게시판 진행.    

실무수업.  

소스중심.  

Spring 부트  