# 2021년 8월 31일 [75일차]

## # 오전수업
----
### `09:30~`

### # 검색 총 개수 표기하기.  

어제, 과제.  

정답 풀이.  

`BoardController.java`  에서,  

검색 결과물의 개수를 가져오기.  

```java
// ***************************************
// 검색 조건에 맞는 [게시판 목록의 총개수] 얻기
// ***************************************
int getBoardListCount = this.boardDAO.getBoardListCount( boardSearchDTO );
```
> 서비스층을 거치는 이유는 트랜잭션, DB연동 세세하게 하기 위해,  
> 여기서는 바로 DAO 쪽으로 이동,   

> `@Controller`     
> URL 주소 맞이,    

> `@Service`     
> DB연동의 세분화,      

> `@Repository`    
> 직접적 DB 연동    

```java
// ***************************************
// [ModelAndView 객체] 에 [게시판 목록 검색 결과]를 저장하기
// ***************************************
mav.addObject("boardList", boardList);


mav.addObject("getBoardListCount", getBoardListCount);
```
> 연동결과를 ModelAndView 객체 에 저장하기.  

#

`BoardDAO.java` 에서,  

```java
// ******************************************************
// [검색한 게시판 목록 총개수] 리턴하는 메소드 선언
// ******************************************************
int getBoardListCount(BoardSearchDTO boardSearchDTO);

```

#

`BoardServiceImpl.java`

```java
// ******************************************************
// [검색한 게시판 목록 개수] 리턴하는 메소드 선언
// ******************************************************
public int getBoardListCount(BoardSearchDTO boardSearchDTO){

    // -------------------------------------------
    // [SqlSessionTemplate 객체]의 selectOne(~,~) 를 호출하여 [1개 게시판 글 정보] 얻기
    // selectOne 은 1행 m열의 select 결과를 얻을 때 사용하는 메소드이다.  
    // -------------------------------------------
    int getBoardListCount = this.sqlSession.selectOne(
        //-----------------------------------------------
        // 실행할 SQL 구문의 위치를 지정하기.
        // 실행할 SQL 구문의 위치 문자열 패턴은 아래와 같다.
        // xml 파일 중에 "mapper태그의namespace명.mapper태그내부의호출할SQL구문소유한태그id값"
        //-----------------------------------------------
        "com.naver.erp.BoardDAO.getBoardListCount"	// 실행할 SQL 구문의 위치 지정
        //-----------------------------------------------
        // 실행할 SQL구문에서 사용할 데이터 지정하기
        //-----------------------------------------------
        , boardSearchDTO
    );                       

    // -------------------------------------------
    // [1개 게시판 글 정보] 리턴하기
    // -------------------------------------------
    
    System.out.println("BoardDAOImpl 게시판 목록 검색개수 확인 =>" + getBoardListCount);
    
    return getBoardListCount;

}
```

#

`mapper_board.xml`   

```xml
<select id="getBoardListCount" parameterType="com.naver.erp.BoardDTO" resultType="int">
    select
        count(*)
    from     
          board
    where 
        1=1
        <!-- ============================================================== -->
        <!-- 만약 키워드가 null 이 아니고 길이가 0보다 크면 where 절에 참여하기 -->
        <!-- ============================================================== -->
        <if test="keyword1!=null and keyword1.length()>0">
        and (
            upper(subject) like upper('%${keyword1}%')
            or
            upper(content) like upper('%${keyword1}%')
            or
            upper(writer) like upper('%${keyword1}%')
            or
            upper(email) like upper('%${keyword1}%')
            or
            to_char(reg_date, 'YYYY-MM-DD') like '%${keyword1}%'
            or
            to_char(reg_date, 'YYYYMMDD') like '%${keyword1}%'
            or
            to_char(reg_date, 'YYYY/MM/DD') like '%${keyword1}%'
            or
            to_char(reg_date, 'YYYY,MM,DD') like '%${keyword1}%'
        )
        </if>

</select>
```

#

`boardList.jsp`  

```java
  ,success  : function( responseHTML ){
  
      var html = $(responseHTML).find(".searchResult").html();

      $(".searchResult").html(html)

      
      var cnt = $(responseHTML).find(".boardListAllCnt").text();
      $(".boardListAllCnt").text(cnt);



  
  }



  // ---------------- 아래는 테이블 태그 위쪽에,


  <div class="boardListAllCnt" style="height: 10px;">검색 개수 : <% out.print( (int)request.getAttribute("getBoardListCount") );%> 개</div> <br><br><br><!-- 공백조절용 div 태그 -->

```

#

----
### `10:30~`








----
### `11:30~`








----
### `12:30~`








----
### `13:20~`

  - 점심시간.

---
---

## # 오후수업

---
### `14:30~`










---
### `15:30~`









----
### `16:30~`








----
### `17:30~`








----
### `18:30~`

면접준비,    

양복, 신발,   

#


