# 2021년 8월 27일 [73일차]

## # 오전수업
----
### `09:30~`

어제 수정가능하게 구현하는것.  

수정/삭제 페이지에서 비밀번호를 누르고 일치하면,  
수정/삭제 가능하도록 하게 하기.  

수정/삭제 페이지 진입 후, 원글이 수정/삭제 전에 먼저 지워지는경우,  
대비하여 DB에 먼저 진입해서 찾고나서 실행필요.  

#

`boardUpDelForm.jsp` 에서 이어서 코딩.      
`checkBoardUpDelForm()` 메소드 코딩.    
유효성 체크는 서버쪽에서.  

```javascript
// ***************************************************
// [게시판 등록 화면]에 입력된 데이터의 유효성 체크 함수 선언
// ***************************************************
function checkBoardUpDelForm( upDel ){
    
    // -----------------------------------------------------
    // 매개변수로 들어온 upDel 에 "up" 이 저장되었으면
    // 즉, 수정 버튼을 눌렀으면 각 입력양식의 유효성 체크하고 수정 여부 물어보기
    // -----------------------------------------------------
    if(upDel=='up'){
        // $(".xxx").remove()       // 테스트 확인용.
        // $("body").append("<div class=xxx>테스트 메시지.</div>")  // 테스트 확인용.
        if(confirm("정말 수정 하시겠습니까??")==false) {return;}
        $("[name=upDel]").val("up");
        
        // --------------------------------------------
        // 현재 화면에서 페이지 이동 없이(=비동기방식으로)
        // 서버쪽 boardUpDelProc.do 로 접속해서 수정 또는 삭제하기 
        // --------------------------------------------
        $.ajax({

        // ----------------------------------------------------------
        // 서버쪽 호출 URL 주소 지정
        // ----------------------------------------------------------
        url       : "/boardUpDelProc.do"
        // ----------------------------------------------------------
        // form 태그 안의 입력양식 데이터 즉, 파라미터값을 보내는 방법 지정
        // ----------------------------------------------------------
        ,type     : "post"
        // ----------------------------------------------------------
        // 서버로 보낼 파라미터명과 파라미터값을 설정. 
        // ----------------------------------------------------------
        ,data     : $("[name=boardUpDelForm]").serialize() 
            
        ,dataType : "html"
        // ----------------------------------------------------------
        // 서버의 응답을 성공적으로 받았을 경우 실행할 익명함수 설정.
        // 익명함수의 매개변수에는 서버가 보내온 html 소스가 문자열로 들어온다.
        // 즉, 응답 메시지 안의 html 소스가 문자열로써 익명함수의 매개변수로 들어온다.  
        // 응답 메시지 안의 html 소스는 boardUpDelProc.jsp 의 실행 결과물이다.
        // ----------------------------------------------------------
        ,success  : function( responseHTML ){
```
> 누구의 글인지 확인하기 위해서,  
> hidden 태그의 PK값을 들고 가야한다.  
> 수정인지 삭제인지 구분지어줄 hidden 태그도 있어야 한다.  


----
### `10:30~`

> from 태그에 아래 코딩 추가 해야 한다.  
> `<input type="hidden" name="b_no" value="<%=b_no%>">`  
> `<input type="hidden" name="upDel" value="">`  

#

`BoardController.java` 에서,  
`"/boardUpDelProc.do"` 관련 코딩    
```java
// mmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmm
// mmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmm
// /boardUpDelProc.do 접속 시 호출되는 메소드 선언
// mmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmm
// mmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmm
@RequestMapping( value="/boardUpDelProc.do" )
public Map<String,String> boardUpDelProc( 
    // ***********************************************
    // 파라미터값을 저장할 [BoardDTO 객체]를 매개변수로 선언
    // ***********************************************
    BoardDTO boardDTO
    // ***********************************************
    // "upDel" 라는 파라미터명의 파라미터값이 저장된 매개변수 b_no 선언
    // ***********************************************
    ,@RequestParam(value = "upDel") String upDel
    // **********************************************
    // Error 객체를 관리하는 BindingResult 객체가 저장되어 들어오는 매개변수 bindingResult 선언
    // 유효성 검사결과를 관리
    // **********************************************
    , BindingResult bindingResult
){

    // **********************************************
    // 만약 게시판 삭제 모드이면
    // **********************************************
    if( upDel.equals("del") ){

    }
    // **********************************************
    // 만약 게시판 수정 모드이면 수정 실행하고 수정 적용행의 개수 얻기
    // **********************************************
    else if(upDel.equals("up")){



    }
      // ***************************************
    // [ModelAndView 객체] 생성하기
    // [ModelAndView 객체] 에 [호출 JSP 페이지명]을 저장하기
    // [ModelAndView 객체] 에 [수정/삭제할 1개의 게시판 글 정보] 저장하기  
    // [ModelAndView 객체] 리턴하기
    // ***************************************
    ModelAndView mav = new ModelAndView( );
    mav.setViewName("boardUpDelProc.jsp");
    mav.addObject("result", "boardUpDelProc.jsp 진입 성공!!");
    return mav;


}
```
> DTO 의 구조는 테이블과 맞아떨어져야 한다.    
> 자바에서 문자 비교 `.equals()` 써주어 비교해야 한다.  

> `else if(upDel.equals("up")){` else 대신 쓰는 이유는,  
> `"del"`, `"up"` 명확하게 구분 하기 위해서.  

#

`boardUpDelProc.jsp` 생성하기.  
```html
<span style="font-size:30px; font-weight: bold; color: red;">
  boardUpDelProc.jsp 접속 성공!!!!
  </span>

  <hr> 

<span class="result"><%out.print( (String)request.getAttribute("result"));%></span>
```





----
### `11:30~`








----
### `12:30~`








오후에 주석 새로 깨끗하게 달기.  

----
### `13:20~`

  - 점심시간.

---
---

## # 오후수업

---
### `14:30~`










---
### `15:30~`









----
### `16:30~`








----
### `17:30~`








----
### `18:30~`
