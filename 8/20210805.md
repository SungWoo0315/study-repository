# 2021년 8월 5일 [59일차]

## # 오전수업
----
### `09:30~`

JQuery 마감.     

비동기방식.    

전반적 복습 후 JSP + Spring 예제중심.    

#

## # `jquery_test_13.html` 예제 파일.

각각의 셀렉트 창에서   

첫번째 셀렉트에서 고른것은 두번째 세번째에서 사라지고,  

두번째를 고르고 첫번째에서 두번째 고른것을 고르면 빠지게 하는..

중복선택이 불가능하도록.    

옵션태그 덮어씌우는것.  

기능별로 하나씩 구현해보기.  JSP 선택하면 나머지 선택란에서 빠지는것부터.    

#

- 달력만들기. 나중에 해보기.  

  그 달의 몇일까지가 마지막날인지. Date 객체 써서,   

  그달의 1일이 무슨요일인지. 월요일 이후라면, 전 달의 날짜.    

  부등호를 누르면 다음달 넘어가도록.  

  ![달력만들기](https://github.com/SungWoo0315/study-repository/blob/main/image-save/20210805%200944_%EA%B3%BC%EC%A0%9C_%EB%8B%AC%EB%A0%A5_.png)  


----
### `10:30~`


## # `jquery_test_14.html` 예제 파일.

사진 효과.  사진위에 마우스 올리면 기존의것이 사라지고 새로운것이 나타나도록.  

a 태그 특징.  HTML 복습하기.  

마우스 대면 기존의 것이 서서히 사라지고, 댄것이 서서히 나타난다.  

```javascript
  // *****************************************
  // class = small 을 가진 태그에 마우스 대면, 떼면 일어나는 일 설정
  // *****************************************
  $(".small").hover(
    function(){
      // ------------------------------------------------------------
      // 마우스를 댄 것의 부모 태그, 즉, td 에 class=hover 을 삽입.
      // 그러면 CSS 가 꾸며준다.  
      // ------------------------------------------------------------
      $(this).parent().addClass("hover");
      // ------------------------------------------------------------
      // 마우스를 댄 a 태그의 href 속성값 얻기.  
      // ------------------------------------------------------------
      var imgName = $(this).attr("href");
      // ------------------------------------------------------------
      // class="large" 인 것의 서서히 사라지고 난 후, src 속성에 마우스를 댄 
      // img 태그의 href 속성값 설정하기. 그리고 다시 서서히 나타나기
      // ------------------------------------------------------------
      $(".large").fadeOut(
        "slow"
        , function(){
          $(".large").attr("src", imgName);
          $(".large").fadeIn("slow")
        }
      )



      
      $(".msg").text(imgName);		// 테스트 // href 속성값 확인.
      // $(".msg").text("마우스 온!!");		// 테스트  // hover 확인.   
    }
    ,function(){
      // 마우스를 빼면 class=hover 을 삭제.
      // 삭제함으로써 CSS 효과가 사라짐.
      $(this).parent().removeClass('hover');






      // $(".msg").text("마우스 아웃!!");	//테스트 확인용.
    }
  );
```
> `addClass()`, `attr()`, `fadeOut()`, `fadeIn()`, `removeClass()` 사용.  

#


----
### `11:30~`

위 코드에서 메모리 낭비가 심해서 비효율적이다.  

`$(this)`, `$(".large")` 똑같은 JQuery 객체를 반복해서 호출하는것이 비효율.  

```javascript
  // ------------------------------------------------------------
  // 변수 thisObj 선언하고,
  // 마우스를 댄 태그를 관리하는 JQuery 객체의 메위주를 얻어 변수 thisObj 에 저장
  // ------------------------------------------------------------
  var thisObj = $(this);
  // ------------------------------------------------------------
  // 마우스를 댄 것의 부모 태그, 즉, td 에 class=hover 을 삽입.
  // 그러면 CSS 가 꾸며준다.  
  // ------------------------------------------------------------
  thisObj.parent().addClass("hover");
  // ------------------------------------------------------------
  // 마우스를 댄 a 태그의 href 속성값 얻기.  
  // ------------------------------------------------------------
  var imgName = thisObj.attr("href");
  // ------------------------------------------------------------
  // class="large" 인 것의 서서히 사라지고 난 후, src 속성에 마우스를 댄 
  // img 태그의 href 속성값 설정하기. 그리고 다시 서서히 나타나기
  // ------------------------------------------------------------
  var largeObj = $(".large");
  largeObj.fadeOut(
    "slow"
    , function(){
      largeObj.attr("src", imgName);
      largeObj.fadeIn("slow")
    }
  )
```
> `var thisObj = $(this);` 변수에 넣어주고 활용하면 된다.    
> `var largeObj = $(".large");` 변수에 넣어주고 활용하면 된다.    


----
### `12:30~`
 
## # `jquery_test_13.html` 예제 파일. 어제 문제 풀이.

```javascript
  $(document).ready(function(){

    $("#skills").children("select").change(function(){

      // --------------------------------------------------
      // change 이벤트가 발생한 select 태그를 관리하는 JQuery 객체의 메위주를 얻어 
      // 변수 selectObj 생성해 저장.
      // --------------------------------------------------
      var selectObj = $(this);
      // --------------------------------------------------
      // change 이벤트가 발생한 select 태그의 현재 선택값을 얻어 변수 choiceVal 에 저장.
      // --------------------------------------------------
      var choiceVal = selectObj.val();
      // --------------------------------------------------
      // change 이벤트가 발생한 select 태그의 형제 중 나의 인덱스번호 저장.  
      // --------------------------------------------------
      var idx = selectObj.index();
      // --------------------------------------------------
      // change 이벤트가 발생한 select 태그의 선택값과 형제들의 선택값을
      // 저장할 Array 객체 생성하고 선택값을 구해서 Array 객체에 저장.
      // --------------------------------------------------
      var values = [];

      // --------------------------------------------------
      var allSelectObj = selectObj.parent().children("[name^=skill]");
      allSelectObj.each(function(){
      // $("#skills").children("[name^=skill]").each(function(){ // 윗줄과 같은 코드이다.  
        var value = $(this).val();
        if( value==null || value=="" ){
          values.push( "" );
        }else{
          values.push( value );
        }
      });
      // --------------------------------------------------
      // i 번째 select 태그와 ii 번째 select 태그와의 선택값 관계가
      // 이상이 있으면 선택값을 비우기.
      // --------------------------------------------------
      for( var i=0; i<values.length-1; i++ ){
        for( var ii=i+1; ii<values.length; ii++ ){
          // ------------------------------------
          // i 번째 select 태그의 선택값은 없는데 
          // ii 번째 select 태그의 선택값은 있다면,
          // 즉, i 번째 형의 선택값은 없는데 ii 번째 동생의 선택값은 있다면
          // ------------------------------------
          if( values[i]=="" && values[ii]!="" ){
            // i 번째 select 태그 이후의 모든 select 태그의 value 값을 비우기.
            allSelectObj.eq(i).nextAll().val("");
          }
          // ------------------------------------
          // i 번째 select 태그의 선택값이 있고,
          // i 번째 select 태그의 선택값과 ii 번째 select 태그의 선택값이 같으면 
          // 즉, i 번째 형의 선택값과 ii 번째 동생의 선택값이 같으면
          // ------------------------------------
          else if( values[i]!="" && values[i]==values[ii] ){
            // ii 번째 select 태그 부터 시작해서 그 이후의 모든 select 태그의 value 값을 비우기  
            allSelectObj.eq(ii-1).nextAll().val("");
          }
        }
      }
      
      $("body").append( "<hr>" + values.join(",") )	// 테스트용 // 형 동생 나의 value 값을 array 객체에 저장한것 확인.
      // alert(idx)	// 테스트 // 인덱스번호 확인 
      // alert( choiceVal )	// 테스트 // select 네임 속성값 확인.  
      // alert( $(this).attr("name") )	// 테스트 // select 네임 속성값 확인.  

    });
  });
```
> `"[name^=skill]"` : 네임값이 skill~로 시작하는것을 선택.    

> 선택값을 가져와서 빼야 한다.    

> 변수선언과 데이터 저장이 중요하다.  

> 형 동생들의 각 value 값을 비교해야한다.  
> ![value 값 비교 설명](https://github.com/SungWoo0315/study-repository/blob/main/image-save/20210805%201215_test_13_%EC%84%A4%EB%AA%85_.png)  


> 선택된 상태에서 첫번째랑 두번째 비교,  
> 같다면? 두번째를 삭제.

> 첫번째 세번째 비교해서 다르면 그냥 둠.  

> 두번째 세번째 비교해서 , 두번째가 비워져 있으니까, 세번째도 비워져야 되도록.     

> 위와같이 하려면 더블 반복문 필요.  

> `children()` 그냥 쓰면 모든 자식이 잡히지만, 괄호안에 선택자를 넣으면 자식들 중에 그것만 골라진다.  

----
### `13:20~`

  - 점심시간.

---
---

## # 오후수업

---
### `14:30~`, `15:30~`

## # `jquery_test_13.html` 예제 풀이 오전에, 이어서.  

오전 풀이에는 

```javascript
  // --------------------------------------------------
  // 형이 가진 option 태그를 복사해 바로 아래 동생의 select 태그 안에
  // 덮어 씌우고 형이 선택한 데이터가 있으면 그 데이터를 가진
  // option 태그를 지우기
  // --------------------------------------------------
  for( var i=0; i<allSelectObj.length-1; i++){
    // i 번째 select 태그의 선택값을 얻어서 변수에 저장하기.
    var nowValue = allSelectObj.eq(i).val();
    // i+1 번째 select 태그의 선택값을 얻어서 변수에 저장하기.
    var nextValue = allSelectObj.eq(i+1).val();
    // i 번째 select 태그가 가진 모든 option 태그를 복해서 
    // i+1 번째 select 태그의 안에 덮어 씌우기
    allSelectObj.eq(i+1).html(

      allSelectObj.eq(i).html()

    )
    // i 번째 select 태그의 선택값이 있으면
    if( nowValue!="" ){
      // ------------------------------------
      // i+1 번째 select 태그 내부의 option 태그 중
      // i 번째 select 태그의 선택값을 가진 option 태그를 지우기.
      // ------------------------------------
      allSelectObj.eq(i+1).children().filter("[value='"+nowValue+"']").remove();
      // ------------------------------------
      // i+1 번째 select 태그에 선택값이 있었다면, 그 값을 다시 선택하게 하기.  
      // ------------------------------------
      if( nextValue!="" ){ allSelectObj.eq(i+1).val(nextValue);}

    }
    // i 번째 select 태그의 선택값이 없으면
    else{
      // i+1 번째 select 태그의 선택값 지우기.  
      allSelectObj.eq(i+1).val("");
    }
  }
```
> 첫번째 선택 시, 첫번째의 option 태그 두번째에 덮어씌우고, 첫번째가 선택한 option 태그 선택값 삭제.      
> 두번째 선택시, 세번째에 option 태그들 덮어씌우고 두번째가 선택한 option 태그 세번째에서 삭제.   

> 동생에게 덮어 씌우고 나면 기본적으로 첫번째 빈칸인 option 태그가 선택되어져서 선택을 할 수 없게 된다. 그러므로 `if( nextValue!="" ){ allSelectObj.eq(i+1).val(nextValue);}` 코드를 넣어주어 다시 선택하게 하여 선택 가능하게 하여야 한다.  

#




















----
### `16:30~`








----
### `17:30~`








----
### `18:30~`
