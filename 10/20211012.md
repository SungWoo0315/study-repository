# 2021년 10월 12일 [99일차]

## # 오전수업
----
### `09:30~`

이번주 목요일 오후 3시 30분 이력서 클리닉.   

#

`~:3000/board/loginForm`

으로 접속 예정 

nodeJS 서버 로그인화면.   

화면 UI 만 리액트 nodeJS 서버로 하고,  

Tomcat 서버는 DB 연동으로 하는 리액트와 연동작업 할 예정.    

#

남은 기간동안은 게시판 소스 분석하기.    

#

`board 폴더` 생성.   

`LoginForm.js` 파일 생성 후 코딩.   

```js
import React, {useState, useRef, useEffect} from 'react';
import axios from "axios";

function LoginForm(){

    const [id_pwd,setId_pwd] = useState( {login_id:'', pwd:''} );

    const change = (e) => {
        setId_pwd( {...id_pwd, [e.target.name]:e.target.value} );
    }


    return(
        <>
        <center><br/>

            <table border="0" cellPadding="7" cellSpacing="0" bgcolor="lightgray">
                <caption>[로그인]</caption>
            
            <tr>
                <td align="right">[아이디]</td>
                <td>
                    <input 
                        type='text'
                        name='login_id'
                        onChange={change}
                    />
                </td>
            </tr>
            <tr>
                <td align="right">[암 호]</td>
                <td>
                    <input 
                        type='text'
                        name='pwd'
                        onChange={change}
                    />
                </td>
            </tr>
            </table>
            <button>로그인</button>&nbsp;
        </center>
        </>
    )

}
export default LoginForm;
```
> App.js 에서 접속경로 설정하기.  
> <주의> board 폴더 안에 있으므로 설정 시 주의.  

#

원격지 DB 연동하려면 `axios` 필요.   

터미널에,   
`yarn add axios` 명령 하여 `axios` 모듈 설치.    

#

톰캣 서버 접속해서 아이디 암호 있는지 확인하는 작업.   

리액트에서 변수 선언할 때 사용자 정의 객체를 사용한다.  

#

----
### `10:30~`

이전시간 이어서,  

```js
  <button onClick={login}>로그인</button>&nbsp;<br/>
```
> 로그인 버튼을 눌렀을 때 아이디 암호 가지고 톰캣 서버에 들어가도록. `login` 함수 호출.       

#

`login` 위로 올라가서 만들기.  
```js
    const login = (e) => {
        axios.post(
            // "타서버의URL"
            'http://localhost:8081/loginProc.do'   
            // 사용정객체
            ,id_pwd
        ).then(
            // 매개변수
            responseJson=>{
                if( responseJson.data==1 ){
                    alert("로그인 성공!")
                }
                else{
                    alert("아이디 또는 암호가 틀립니다. \n재입력 요망!");
                    setId_pwd( {...id_pwd,...{login_id:'', pwd:''}} );
                    // 위와 아래코드는 똑같은 것이다.
                    // 아이디 암호가 틀렸을때 공백으로 덮어씌우는 것이다.
                    // setId_pwd( {login_id:'aaa', pwd:'123',login_id:'', pwd:''} );
                }
            }
        ).catch(
            error => {
                alert("서버 통신 실패" + error.message);
            }
        )
    }
```
> 매개변수쪽으로 타서버가 넘겨준, JSON 객체가 들어온다.  
> 아이디 암호의 존재 개수가 JSON 형태로 들어온다.  
> 예외가 발생하면, 예외를 발생한 객체가 들어있다.  
> ` error.message` 를 통해서 에러의 종류를 알 수 있다.  

> 타웹버서 데이터, JSON으로 넘긴다고 보면 된다.  

#

----
### `11:30~`

위에서 했던 코딩들 주석설명 달기.  

```js

```

#

`workspace_sboot_리액트연동` 스프링부트로 열고, 
> 깃헙에 백업되어 있는걸 사용.    
리액트랑 연동 준비.    

`LoginController.java` 에서,  
`loginProc` 부분,   

```java
			@RequestParam( value="login_id" , required=false) String login_id
			//--------------------------------------
			, @RequestParam( value="pwd" , required=false) String pwd
			//--------------------------------------
			, @RequestParam( value="is_login", required=false  ) String is_login
```
> 이 세가지 코드는 리액트 연동 시 쓸 수 없다.   
> 리액트에서 사용자 정의 객체로 날리면,  
> 스프링(자바)에서 사용정 객체와 유사한 것으로 받아야 한다.  
> DTO로 받아야 한다.   
> 무조건 DTO로 받아서 들어가야한다.  

```java
@RequestBody LoginDTO loginDTO

// DTO로 받아온값 확인.  

		String login_id = loginDTO.getLogin_id();
		String pwd = loginDTO.getPwd();
		String is_login = loginDTO.getIs_login();


		System.out.println( "loginDTO.login_id => " +login_id );
		System.out.println( "loginDTO.pwd => " + pwd );
```
> `RequestParam` 대신에 이 코드가 들어가야 한다.  

----
### `12:30~`








----
### `13:20~`

  - 점심시간.

---
---

## # 오후수업

---
### `14:30~`










---
### `15:30~`









----
### `16:30~`








----
### `17:30~`








----
### `18:30~`
