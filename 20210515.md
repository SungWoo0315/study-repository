# 2021년 5월 15일 [과제 겸 공부]

## [OS] 메모리 
  
- Process 실행을 위한 핵심요소는 CPU 와 Memory이다.  

- 그 중 Memory는 프로세스 가 프로그램을 구동하기 위해서 각 데이터 상태를 적재하는 공간이다.  

- 이러한 공간에도 각각의 영역이 존재한다.  


  - Code (Text) 영역  

  - Data (BSS, GVAR) 영역  

  - Heap 영역  

  - Stack 영역  

> 영역은 각각의 특징을 가지고 있다.

#

### # 메모리 영역

<img src = "image-save/Image202105153.png">

### # Code(Text) 영역  

- Code(Text) 영역은 실행명령을 포함하는 프로그램의 코드가 저장되는 영역. 

- CPU가 이 영역에 저장된 명령어를 처리함.  

- 읽기 전용 영역이기에 함부로 변경할 수 없고 변경 시 오류 발생.  

- 컴퓨터가 이해할 수 있게 컴파일한 `기계어`로 번역된 소스코드가 들어가는 영역.  

- 컴파일 시 크기가 결정됨.  

#

### # Data (BSS, GVAR)영역  

- `전역변수(global), 정적변수(static), 정적배열, 정적구조체` 등의 영역.

- 프로그램 시작과 동시에 데이터가 적재.

- 프로그램 종료되면 사라진다(반환된다).

- 프로그램이 종료될 때까지 데이터가 남아 다른 함수에서도 사용 가능.

- 세부로 `BSS`와 `GVAR`로 나뉘어진다.
  -	`BSS 영역` : 초기화되지 않은 데이터 저장
  -	`GVAR 영역` : 초기화된 데이터 저장

    - `BSS, GVAR 구분하는 이유` :  
    
       초기화 된 데이터는 초기 값을 rom에 저장해야 함.  
       Rom 사이즈가 한정적이므로 초기화 되지 않은 데이터는 Ram에 저장.  

- 컴파일 시 크기가 결정됨.

#

### # Heap 영역  

- New, malloc 등 동적 할당 객체 영역.

- 필요에 의해 메모리를 동적으로 할당할 때 사용.  
= 사용자에 의해 메모리 사용가능(원하는 시점에서 메모리를 할당 : 동적할당) 영역.

- C 언에 예시   
  - malloc() : 메모리 공간을 힙 영역에 할당.  
  - free() : malloc()에 의해 할당된 메모리 공간 소멸.  
  - realloc() : 힙 영역안에 이미 할당 된 변수의 메모리 공간을 변경.  

- Heap에서 오류로 인하여 `[메모리 누수현상 – Memory Leak]` 발생하여 `Garbage`생성.  
- 누수현상 방지를 위해 `메모리 반환`을 해주어야 한다.  
- C C++은 메모리 관리를 개발자야 하여야 함.  
- C# JAVA는 해당언어 가상머신들이 관리함. (Garbage Collection 지원)  


- 특징 : Heap과 Stack은 같은 공간을 공유.

  ```서브루틴 시작 -> 지역변수 적재 -> 서브루틴 끝나면 소멸. = 용량에 대한 불확실성.```

  ```
  Heap은 낮은 주소부터 할당.  

  Stack은 높은 주소부터 할당.  
  ```

- 각 영역이 상대 공간 침범 가능. 

  ```
  Stack overflow : Stack 영역이 Heap 영역을 침범  

  Heap overflow : Heap 영역이 Stack 영역을 침범
  ```

- 런타임 시 크기 결정됨.

#

### # Stack 영역  

- 호출되는 함수의 지역변수, 매개변수가 적재되는 영역.

- 함수 호출 시 생성되어 적재되고, 함수가 종료되면 반환.

- 런타임 시 크기 결정됨.

- 프로세스가 메모리에 로드 될 때 사이즈가 고정되어 런타임 시 사이즈를 바꿀 수 없다.

- 특징 : `LIFO(List In First Out)`
  ```
  가장 마지막으로 저장된 데이터가 가장 먼저 인출된다.  
  
  다른 메모리 영역과 다르게 높은 메모리 주소에서 낮은 메모리 주소의 순서로 할당.  
  ```  
  
- `Call Stack` : 현재 실행중인 함수에 대한 정보를 저장하는 스택자료구조 -> `Debug`를 통해 확인 가능

----










----  

## [OS] 프로세스  



<img src = "image-save/Image202105151.png">

<img src = "image-save/Image202105152.png">
